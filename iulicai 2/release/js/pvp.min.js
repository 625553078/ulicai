/*! LC 10-11-2015 */
function verifyTel(a) {
    var b = {
        flag: !0
    };
    return /^1[3|4|5|7|8][0-9]\d{8}$/.test(a) || (b.error = "请输入正确的手机号码", b.flag = !1),
    b
}
function verifyPass(a) {
    var b = {
        flag: !0
    };
    return /^[a-zA-Z0-9!@#$%^&*()]{6,20}$/.test(a) || (b.error = "密码格式错误", b.flag = !1),
    b
}
function verifyIdCard(a) {
    var b = {
        flag: !0
    };
    return /(^\d{15}$)|(^\d{17}([0-9]|X)$)/.test(a) || (b.error = "身份证输入有误", b.flag = !1),
    b
}
function verifyBankCode(a) {
    var b = {
        flag: !0
    };
    return (a.length < 16 || a.length > 19) && (b.error = "银行卡长度必须在16到19位间", b.flag = !1),
    /^\d*$/.test(a) || (b.error = "银行卡输入有误", b.flag = !1),
    b
}
//获取cookie的布尔值
function getCookieByName(a) {
    for (var b = document.cookie.split(";"), c = 0, d = b.length; d > c; c++) {
        var e = b[c];
        if ( - 1 !== e.indexOf(a)) {
            var f = e.substring(e.indexOf("=") + 1);
            return "" !== f && 0 != f ? !0: !1
        }
    }
	return ! 1
}
//获取cookie的值
function getCookieByNameStr(str){
    for (var b = document.cookie.split(";"), c = 0, d = b.length; d > c; c++) {
        var e = b[c];
        if ( - 1 !== e.indexOf(str)) {
            var f = e.substring(e.indexOf("=") + 1);
            return f
        }
    } 
    return ""; 
}

function setCookie(name,value)
{	
	document.cookie = name + "="+ escape (value);
}

function sinapmenber(n, no) {
	$.ajax({
		url: AllUrl.SinaPayMember,
		dataType: "jsonp", 
		success: function(a) {                    
			console.log(a);
			var m = a.code;
			if (m=== "0000")
			{
				realnameauth(n, no);
			} else {
				popWin("认证失败,请重新认证!");
			}		                          
		},                                                     
	})
}

function realnameauth(n, no) {
	$.ajax({
		url: AllUrl.realNameAuth,
		dataType: "jsonp",
		data: {
			name:n,
			certNo:no
		},
		success: function(a) {                    
			console.log(a);
			if (a.code=== "0000")
			{							
				bindverify();
				
			} else {
				popWin("认证失败,请重新认证!");
			}	

		},                                                     
	})
}

function bindverify() {
	$.ajax({
		url: AllUrl.bindingVerify,
		dataType: "jsonp",                 
		success: function(a) {                    
			console.log(a);	
			if (a.code==="0000")
			{	
				window.app.navigation.push(AllUrl.setSinaPayPwd);
			} else {
				popWin("认证失败,请重新认证!");
			}			                          
		},                                                     
	})
}

function activepm(mob, pd) {
	 $.ajax({
		url: AllUrl.loginUrl,
		dataType: "jsonp",
		data: {
			mobile: mob,
			pwd: pd
		},
		success: function(a) {
			console.log(a);
			var k = a.data.code;
			if ("0000" === k) {			 
				//激活新浪支付账户
				$.ajax({
					url: AllUrl.SinaPayMember,
					dataType: "jsonp", 
					success: function(a) {                    
						console.log(a);
						var m = a.code;
												
					},                                                     
				})                   
			}                                             
		},
		error: function(a) {
			
		}
	})
}

function getTimeFun(s,e){
    var startTime = new Date(Date.parse(s.replace(/-/g,   "/"))).getTime();     
    var endTime = new Date(Date.parse(e.replace(/-/g,   "/"))).getTime();     
    var dates = Math.abs((startTime - endTime))/(1000*60*60*24);     
    return  dates;  
}

function getToday(){
   var mydate = new Date();
   var str = "" + mydate.getFullYear() + "-";
   str += (mydate.getMonth()+1) + "-";
   str += mydate.getDate() + "-";
   return str;
}

function getmonth(){
   var mydate = new Date();
   var str = "" + mydate.getFullYear() + "年";
   var mth = mydate.getMonth().toString();
   if(mth.length==1){
       str += "0" + (mydate.getMonth()+1) + "月";
   }else{
       str += (mydate.getMonth()+1) + "月";
   }
   return str;
}
//str="2015年12月"
function getmonthtop(str){
   var getMonth=str.substring(5,7);
   var getFullYear=str.substring(0,4);
   var mth=getMonth.toString();
   if(getMonth==01){
        str = (eval(getFullYear)-1) + "年";
        str += "" + (eval(getMonth)+11) + "月";   
   }else if(getMonth==12){
        str = eval(getFullYear) + "年";
        str += "" + (parseInt(getMonth,10)-1) + "月";                 
   }else if(getMonth==11){
        str = eval(getFullYear) + "年";
        str += "" + (parseInt(getMonth,10)-1) + "月";                 
   }else if(getMonth==10){
        str = eval(getFullYear) + "年";
        str += "0" + (parseInt(getMonth,10)-1) + "月";                 
   }else if(getMonth==09){
        str = eval(getFullYear) + "年";
        str += "0" + (parseInt(getMonth,10)-1) + "月";                 
   }else if(getMonth==08){
        str = eval(getFullYear) + "年";
        str += "0" + (parseInt(getMonth,10)-1) + "月";                 
   }else if(getMonth==07){
        str = eval(getFullYear) + "年";
        str += "0" + (parseInt(getMonth,10)-1) + "月";                 
   }else if(getMonth==06){
        str = eval(getFullYear) + "年";
        str += "0" + (parseInt(getMonth,10)-1) + "月";                 
   }else if(getMonth==05){
        str = eval(getFullYear) + "年";
        str += "0" + (parseInt(getMonth,10)-1) + "月";                 
   }else if(getMonth==04){
        str = eval(getFullYear) + "年";
        str += "0" + (parseInt(getMonth,10)-1) + "月";                 
   }else if(getMonth==03){
        str = eval(getFullYear) + "年";
        str += "0" + (parseInt(getMonth,10)-1) + "月";                 
   }else if(getMonth==02){
        str = eval(getFullYear) + "年";
        str += "0" + (parseInt(getMonth,10)-1) + "月";                 
   }   
   return str;
}

function getmonthdowm(str){
   var getMonth=str.substring(5,7);
   var getFullYear=str.substring(0,4);
   var mth=getMonth.toString();
   if(getMonth==12){
        str = (eval(getFullYear)+1) + "年";
        str += "0" + (eval(getMonth)-11) + "月";
   }else if(getMonth==01){
        str = eval(getFullYear) + "年";
        str += "0" + (parseInt(getMonth,10)+1) + "月";                 
   }else if(getMonth==02){
        str = eval(getFullYear) + "年";
        str += "0" + (parseInt(getMonth,10)+1) + "月";                 
   }else if(getMonth==03){
        str = eval(getFullYear) + "年";
        str += "0" + (parseInt(getMonth,10)+1) + "月";                 
   }else if(getMonth==04){
        str = eval(getFullYear) + "年";
        str += "0" + (parseInt(getMonth,10)+1) + "月";                 
   }else if(getMonth==05){
        str = eval(getFullYear) + "年";
        str += "0" + (parseInt(getMonth,10)+1) + "月";                 
   }else if(getMonth==06){
        str = eval(getFullYear) + "年";
        str += "0" + (parseInt(getMonth,10)+1) + "月";                 
   }else if(getMonth==07){
        str = eval(getFullYear) + "年";
        str += "0" + (parseInt(getMonth,10)+1) + "月";                 
   }else if(getMonth==08){
        str = eval(getFullYear) + "年";
        str += "0" + (parseInt(getMonth,10)+1) + "月";                 
   }else if(getMonth==09){
        str = eval(getFullYear) + "年";
        str += "" + (parseInt(getMonth,10)+1) + "月";                 
   }else if(getMonth==10){
        str = eval(getFullYear) + "年";
        str += "" + (parseInt(getMonth,10)+1) + "月";                 
   }else if(getMonth==11){
        str = eval(getFullYear) + "年";
        str += "" + (parseInt(getMonth,10)+1) + "月";                 
   }       
   return str;
}

function show_time(){ 
    var time_start = new Date().getTime(); //设定当前时间
    var time_end =  new Date("2015/12/26 00:00:00").getTime(); //设定目标时间
    // 计算时间差 
    var time_distance = time_end - time_start; 
    // 天
    var int_day = Math.floor(time_distance/86400000) 
    time_distance -= int_day * 86400000; 
    // 时
    var int_hour = Math.floor(time_distance/3600000) 
    time_distance -= int_hour * 3600000; 
    // 分
    var int_minute = Math.floor(time_distance/60000) 
    time_distance -= int_minute * 60000; 
    // 秒 
    var int_second = Math.floor(time_distance/1000) 
    // 时分秒为单数时、前面加零 
    if(int_day < 10){ 
        int_day = "0" + int_day; 
    } 
    if(int_hour < 10){ 
        int_hour = "0" + int_hour; 
    } 
    if(int_minute < 10){ 
        int_minute = "0" + int_minute; 
    } 
    if(int_second < 10){
        int_second = "0" + int_second; 
    } 
    // 显示时间 
    //var hours =eval(int_day*24)+eval(int_hour);
    $(".hour").html("0"); //int_hour
    $(".minute").html("0"); //int_minute
    setTimeout("show_time()",1000); 
}

function popWin(a) {
    var b = "";
    b = a ? "<p>" + a + "</p>": "<p>操作成功</p>";
    var c = {
        body: b,
        closable: !0,
        buttons: {
            action: {
                title: "确定",
                fn: function() {
                    basicModal.close()
                }
            }
        }
    };
    basicModal.show(c)
}

function popWinLogin(a) {
    var b = "";
    b = a ? "<p>" + a + "</p>": "<p>操作成功</p>";
    var c = {
        body: b,
        closable: !0,
        buttons: {
            action: {
                title: "继续",
                fn: function() {
                    basicModal.close();
                    app.navigation.push("/login");
                }
            }
        }
    };
    basicModal.show(c)
}

var ipAddr = "http://m.iulicai.com:8080/ulicai";
AllUrl = {
    registUrl: ipAddr + "/user/register.htm",
    registNameUrl: ipAddr + "/user/registerName.htm?",
    authenNameUrl: ipAddr + "/user/authenName.htm?",
    loginUrl: ipAddr + "/user/login.htm?",
    logout: ipAddr + "/user/logout.htm?",
    modPass: ipAddr + "/user/modPwd.htm?",
    findPass: ipAddr + "/user/findPwd.htm?",
    sendRegCode: ipAddr + "/sms/genRegCode.html?",
    sendModCode: ipAddr + "/sms/genModCode.htm?",
    sendFindCode: ipAddr + "/sms/genFindCode.htm?",
    acctInfo: ipAddr + "/acct/assertStat.htm",
    earnDay: ipAddr + "/acct/dayEarns.htm?",
    totalEarns: ipAddr + "/acct/ordEarns.htm?",
    accDetail: ipAddr + "/acct/books.htm",
    addDebitCard:ipAddr+"/acct/addDebitCard.htm",
    bonusUrl: ipAddr + "/acct/acctCoupons.htm?",
    manageCardUrl: ipAddr + "/acct/manageCard.htm?",
    personalUrl: ipAddr + "/acct/personal.htm?",
    rechargeUrl: ipAddr + "/acct/recharge.htm?",
    rechargeAfterUrl: ipAddr + "/acct/rechargeAfter.htm?",
    withdrawUrl: ipAddr + "/acct/withdraw.htm?",
    getProds: ipAddr + "/prodqry/getprods4page.htm?",//获取所有产品
    getRevenue: ipAddr + "/pay/prosRevenue.htm?",//计算收益
    getOrds: ipAddr + "/order/getorders4page.htm?",//获取所有交易记录
    getCardList: ipAddr + "/pay/infoQuery.htm?operate=query_bankcard_list",//所有已绑定卡号
    bindCard: ipAddr + "/pay/infoQuery.htm?operate=query_card_bin",//绑定银行卡
    pay: ipAddr + "/pay/toPay.htm?",//支付
    SinaPayMember: ipAddr + "/user/activeSinaPayMember.htm",//激活新浪支付账户
    realNameAuth: ipAddr + "/user/realNameAuth.htm",//实名认证
    bindingVerify: ipAddr + "/user/bindingVerify.htm",//绑定验证信息
    setSinaPayPwd: ipAddr + "/user/setSinaPayPwd.htm",//设置支付密码
    getSinaPayState: ipAddr + "/user/getSinaPayState.htm",//查询新浪支付账户状态
    isSinaPay: ipAddr + "/user/isSinaPayPwdSet.htm",//查询新浪支付账户是否已设置密码
    paydeposit: ipAddr + "/pay/deposit.htm",//充值
    paywithdraw: ipAddr + "/pay/withdraw.htm",//提现
    getorder: ipAddr + "/prodqry/getprod.htm",//获取单个产品
    balanceinfo: ipAddr + "/acct/balanceinfo.htm",//查询账户余额
    bcardinfo: ipAddr + "/user/bcardinfo.htm",//查询绑定银行卡
    getUserInfo: ipAddr + "/user/getUserInfo.htm",//查询用户信息
    repaymentUrl: ipAddr+"/pay/createMortgagorRepayment.htm",//还款
    getUserAcc: ipAddr+"/user/getUserAccDetails.htm",//收支明细
    getUserInv: ipAddr+"/user/getUserInviteInfo.htm",//邀请明细
    getWxsign:ipAddr+"/sys/getTicket.htm" //微信ticket获取链接    
};
var BonusType = {
    a: "好友红包",
    b: "注册红包"
},
PayStatus = {
    0 : "未支付",
    1 : "订单已取消",
    2 : "已支付",
    3 : "支付成功",
    4 : "支付失败",
    9 : "还款中",
    13: "还款中",
    14: "还款中",
    16: "还款中",
    15: "已还款"
}; ! 

function(a, b) {
    var c = b.module.View,
    d = b.module.Page;
    c.fn.delegateEvents = d.fn.delegateEvents = function(a) {
        var b = this.$el,
        c = this;
        b && a.forEach(function(a) {
            c[a[2]] && (a[2] = c[a[2]]),
            b && b.on(a[0], a[1], 
            function(b) {
                a[2].apply(c, arguments)
            })
        })
    },
    c.fn.undelegateEvents = d.fn.undelegateEvents = function() {
        this.$el && this.$el.off()
    },
    b.plugin.domevent = {
        onPageStartup: function(a, b) {
            a.events && a.delegateEvents(a.events)
        },
        onPageTeardown: function(a, b) {
            a.undelegateEvents()
        },
        onViewRender: function(a, b) { ! a._isDelegateEvents && a.events && (a._isDelegateEvents = !0, a.delegateEvents(a.events))
        },
        onViewDestory: function(a, b) {
            a.undelegateEvents(),
            a._isDelegateEvents = !1
        }
    }
} (window, window.app),
function(a, b) {
    a.document;
    b.plugin.lazyload = {
        _options: null,
        _domready: !1,
        handleEvent: function(a) {
            "scrollend" === a.type && this._domready && this.check()
        },
        check: function() {
            for (var a = this._options, c = a.dataAttr || "data-src", d = b.scroll.getElement().querySelectorAll("img[" + c + "]"), e = b.scroll.getScrollTop(), f = e + b.scroll.getViewHeight(), g = 0; g < d.length; g++) {
                var h,
                i = d[g],
                j = b.scroll.offset(i); (j.top > e && j.top < f || j.bottom > e && j.bottom < f) && (h = i.getAttribute(c)) && (i.setAttribute("src", h), i.removeAttribute(c))
            }
        },
        onNavigationSwitch: function() {
            this._domready = !1
        },
        onDomReady: function(a) {
            this._options = a,
            this._domready = !0,
            this.check()
        },
        onPageShow: function(a, c) {
            this._options = c,
            b.scroll.addEventListener("scrollend", this, !1)
        },
        onPageHide: function(a, c) {
            b.scroll.removeEventListener("scrollend", this)
        }
    }
} (window, window.app),
function(a, b) {
    var c,
    d,
    e,
    f = a.document,
    g = (b.config, []);
    b.plugin.loading = {
        show: function(a) {
            if (a && (e.innerHTML = a, "block" !== d.style.display)) {
                d.style.display = "block";
                var b = document.body.getBoundingClientRect(),
                c = e.getBoundingClientRect();
                e.style.left = (b.width - c.width) / 2 + "px",
                e.style.top = (window.innerHeight - c.height) / 2 - b.top + "px"
            }
            var f = Date.now();
            return g.push(f),
            f
        },
        hide: function(a) {
            a ? g.splice(g.indexOf(a), 1) : g = [],
            0 === g.length && (e.innerHTML = "", d.style.display = "none")
        },
        onAppStart: function() {
            d = document.createElement("div"),
            d.className = "loading",
            d.style.cssText = ["display: none", "background: transparent", "position: absolute", "width: 100%", "height: 100%", "left: 0", "top: 0", "overflow: hidden", "z-index: 99999"].join(";"),
            e = document.createElement("div"),
            e.style.cssText = ["position:absolute", "width: 100px", "height: 90px", "line-height: 100px", "background-color: rgba(0,0,0,0.5)", "color: #FFF", "text-align: center", "font-size: 11px", "border-radius: 13px"].join(";"),
            d.appendChild(e),
            f.body.appendChild(d)
        },
        onNavigationSwitch: function() {
            c = this.show("正在加载")
        },
        onDomReady: function() {
            this.hide(c)
        }
    }
} (window, window.app),
function(a, b) {
    var c = a.document,
    d = (b.config, 50);
    b.plugin.pullbounce = {
        _options: null,
        _page: null,
        _pullType: !1,
        _onPullStart: function() {
            var a = this._page,
            b = this._options,
            c = a.el.parentNode;
            b.onPullDown && (c.querySelector("#J_pullRefresh").style.visibility = "visible"),
            b.onPullUp && (c.querySelector("#J_pullUpdate").style.visibility = "visible")
        },
        _onPullDown: function(a) {
            var b = this._page,
            c = b.el.parentNode.querySelector("#J_pullRefresh span");
            c.innerText;
            c.innerText = ""
        },
        _onPullUp: function(a) {
            var b = this._page,
            c = b.el.parentNode.querySelector("#J_pullUpdate span");
            c.innerText;
            c.innerText = ""
        },
        _onPullEnd: function() {
            b.scroll.refresh(),
            b.scroll.resumeBounce()
        },
        handleEvent: function(a) {
            var c = this,
            d = this._page,
            e = this._options,
            f = b.scroll.getBoundaryOffset();
            "panstart" === a.type ? (b.scroll.refresh(), b.scroll.resumeBounce(), console.log("start"), this._onPullStart()) : "pulldown" === a.type ? (this._pullType = "PullDown", this._onPullDown(f)) : "pullup" === a.type ? (this._pullType = "PullUp", this._onPullUp(f)) : "panend" === a.type && f && this._pullType && setTimeout(function() {
                var a = e["on" + c._pullType];
                "string" == typeof a && (a = d[a]),
                a ? a.call(d, c._onPullEnd) : c._onPullEnd()
            },
            400)
        },
        onAppStart: function() {
            var a = c.styleSheets[0];
            a.addRule("#J_pullRefresh, #J_pullUpdate", ["visibility: hidden;", "width: 100%;", "padding: 10px;", "height: " + d + "px;", "line-height: 30px;", "box-sizing: border-box;", "background-color: #f4f4f4;", "font-size: 12px;", "color: #999;"].join(""))
        },
        onPageDefine: function(a, b) {
            a.scroll = {
                bounceTop: b.onPullDown ? d: 0,
                bounceBottom: b.onPullUp ? d: 0
            }
        },
        onPageStartup: function(a, b) {
            a.el.innerHTML = (b.onPullDown ? '<section id="J_pullRefresh"><span></span></section>': "") + '<section id="J_pullContent"></section>' + (b.onPullUp ? '<section id="J_pullUpdate"><span></span></section>': ""),
            a.el = a.el.querySelector("#J_pullContent")
        },
        onPageShow: function(a, c) {
            "J_pullContent" !== a.el.getAttribute("id") && (a.el = a.el.querySelector("#J_pullContent")),
            this._page = a,
            this._options = c,
            this._pullType = !1,
            c.onPullDown && b.scroll.addEventListener("pulldown", this, !1),
            c.onPullUp && b.scroll.addEventListener("pullup", this, !1),
            b.scroll.addEventListener("panstart", this, !1),
            b.scroll.addEventListener("panend", this, !1)
        },
        onPageHide: function(a, c) {
            c.onPullDown && b.scroll.removeEventListener("pulldown", this, !1),
            c.onPullUp && b.scroll.removeEventListener("pullup", this, !1),
            b.scroll.removeEventListener("panstart", this, !1),
            b.scroll.removeEventListener("panend", this, !1)
        }
    }
} (window, window.app),
function(a, b) {
    a.document;
    b.plugin.scrollpos = {
        _options: null,
        _domready: !1,
        handleEvent: function(a) {
            "scrollend" === a.type && this._domready && this.setPos()
        },
        setPos: function() {
            this._options.pos = b.scroll.getScrollTop()
        },
        reset: function(a) {
            var c = this._options;
            null != a && (c.pos = a),
            b.scroll.scrollTo(c.pos)
        },
        onNavigationSwitch: function() {
            this._domready = !1
        },
        onDomReady: function(a) {
            this._options = a,
            this._domready = !0,
            this.reset()
        },
        onPageShow: function(a, c) {
            b.scroll.addEventListener("scrollend", this, !1)
        },
        onPageHide: function(a, c) {
            b.scroll.removeEventListener("scrollend", this)
        }
    }
} (window, window.app),
function(a, b) {
    var c,
    d,
    e,
    f,
    g = a.document,
    h = b.module.Transition,
    i = b.module.Scroll,
    j = b.module.Navigation.instance,
    k = j.getStack(),
    l = b.config,
    m = [];
    b.extendView({
        name: "slideview",
        slideIn: function() {
            var a = this,
            j = document.createElement("div"),
            k = m[m.length - 1];
            if (j.style.cssText = "z-index:" + (m.length + 1e3) + ";position:absolute;width:100%;height:100%;left:0;top:0;background:#FFF;", j.appendChild(this.el), d.appendChild(j), 0 === m.length) {
                var n = 0,
                o = g.body.getBoundingClientRect().height;
                l.enableNavbar && (n = l.enableNavbar.wrapEl.getBoundingClientRect().height),
                l.enableScroll && (o = window.innerHeight),
                d.style.height = o - n + "px",
                d.style.top = n + window.scrollY + "px",
                d.style.display = "";
                var p = d.getBoundingClientRect();
                e = p.width,
                f = p.height
            }
            m.push({
                lastHeader: {
                    title: c.pageMeta.title,
                    buttons: c.pageMeta.buttons
                },
                wrap: j,
                view: this
            }),
            b.navigation.resetNavbar(),
            h.slide(j, "RI", e, 
            function() {
                k && (k.wrap.style.display = "none"),
                b.navigation.setButton({
                    type: "back",
                    text: "返回",
                    handler: function() {
                        a.slideOut()
                    }
                }),
                a.el.getBoundingClientRect().height > f && i.enable(a.el),
                a.show && a.show()
            })
        },
        slideOut: function() {
            var a = this,
            c = m.pop(),
            f = c.wrap,
            g = c.lastHeader,
            j = m[m.length - 1];
            j && (j.wrap.style.display = ""),
            h.slide(f, "RO", e, 
            function() {
                i.disable(c.view.el),
                d.removeChild(f),
                a.hide && a.hide(),
                b.navigation.resetNavbar(),
                b.navigation.setTitle(g.title),
                b.navigation.setButton(g.buttons),
                0 === m.length && (d.style.display = "none")
            })
        },
        close: function() {
            var a = m.pop(),
            c = a.wrap;
            h.slide(c, "RO", e, 
            function() {
                for (; m.length;) a = m.pop(),
                a.view.hide && a.view.hide();
                var c = a.lastHeader;
                b.navigation.resetNavbar(),
                b.navigation.setTitle(c.title),
                b.navigation.setButton(c.buttons),
                d.innerHTML = "",
                d.style.display = "none"
            })
        }
    }),
    b.plugin.slideview = {
        onAppStart: function() {
            d = document.createElement("div"),
            d.style.cssText = "z-index:999;display:none;position:absolute;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0);overflow:hidden;",
            g.body.appendChild(d)
        },
        onNavigationSwitch: function() {
            if (m.length && c) {
                var a = m.shift();
                c.pageMeta.title = a.lastHeader.title,
                c.pageMeta.buttons = a.lastHeader.buttons,
                d.innerHTML = "",
                d.style.display = "none"
            }
            c = k.getState()
        }
    }
} (window, window.app),
function(a, b) {
    function c(a) {
        var b = {};
        for (var d in a) if ("pageMeta" !== d && "plugins" !== d) {
            var e = Object.prototype.toString.call(a[d]);
            "[object Number]" === e || "[object String]" === e ? b[d] = a[d] : "[object Array]" === e ? b[d] = a[d].map(function(a) {
                return c(a)
            }) : "[object Object]" === e && (b[d] = c(a[d]))
        }
        return b
    }
    var d = a.sessionStorage,
    e = b.module.Navigation.instance.getStack(),
    f = "mix_storage_001_";
    try {
        d.setItem("testPrivateModel", "false")
    } catch(g) {
        return console.error("run@private model", window.navigator.appVersion)
    }
    b.plugin.stateStorage = {
        saveAll: function() {
            d.setItem(f + "state_index", e._stateIdx),
            d.setItem(f + "state_length", e._states.length),
            e._states.forEach(function(a, b) {
                d.setItem(f + "state_item[" + b + "]", JSON.stringify(c(a)))
            })
        },
        save: function() {
            var a = e._stateIdx,
            b = e._states[a];
            d.setItem(f + "state_item[" + a + "]", JSON.stringify(c(b)))
        },
        loadAll: function() {
            var a,
            b;
            for (e._stateIdx = parseInt(d.getItem(f + "state_index") || 0), a = parseInt(d.getItem(f + "state_length") || 0), b = 0; a > b; b++) e._states[b] = JSON.parse(d.getItem(f + "state_item[" + b + "]") || "{}")
        },
        load: function() {
            var a = e._stateIdx;
            e._states[a] = JSON.parse(d.getItem(f + "state_item[" + a + "]") || "{}")
        },
        clear: function() {
            var a = e._stateLimit;
            d.removeItem(f + "state_index"),
            d.removeItem(f + "state_length");
            for (var b = 0; a > b; b++) d.removeItem(f + "state_item[" + b + "]")
        },
        onNavigationSwitch: function() {
            this.saveAll()
        },
        onAppStart: function() {
            this.loadAll()
        }
    }
} (window, window.app),
function(a, b) {
    a.extendView({
        name: "earnDayView",
        el: "div.dayEarn",
        template: '{{#dayEarnslist}}<span class="earnRecord" data-total="+{{totalDailyEarn}}元">{{earnDay}}</span>{{/dayEarnslist}}',
        pageno: 1,
        plugins: {
            domevent: !0
        },
        _getNextPage: function(a) {
            var b = this,
            c = b.pageno,
            d = AllUrl.earnDay + "page=" + c;
            $.ajax({
                url: d,
                dataType: "jsonp",
                success: function(b) {
                    var c = b.data;
                    d = c.dayEarnslist;
                    e = d.length;  
                    if (0 == e) {
                        
                    }
                    for (var g = 0; e > g; g++) {
                        var h = d[g].earnDay.substring(0,10);
                        c.dayEarnslist[g].earnDay=h;                                                                                                                                          
                    }                                      
                    a(c)
                }
            })
        },
        _getPageOne: function(a) {
            var b = AllUrl.earnDay + "page=1";
            $.ajax({
                url: b,
                dataType: "jsonp",
                success: function(b) {
                    var c = b.data;
                    d = c.dayEarnslist;
                    e = d.length;  
                    if (0 == e) {
                        
                    }
                    for (var g = 0; e > g; g++) {
                        var h = d[g].earnDay.substring(0,10);
                        c.dayEarnslist[g].earnDay=h;                                                                                                                                          
                    }                                      
                    a(c)
                }
            })
        },
        render: function(a) {
            var b = this;
            b._getPageOne(function(c) {
                var d = b.template(c);
                b.$el.html(d),
                a && a()
            })
        },
        renderMore: function(a) {
            var b = this;
            b.pageno++,
            b._getNextPage(function(c) {
                var d = b.template(c);
                console.log(d),
                b.$el.append(d),
                a && a()
            })
        },
        destroy: function() {}
    })
} (window.app),
function(a, b) {
    a.extendView({
        name: "expenseView",
        el: "div#expenselist",
        template: "./templates/expenseView.tpl",
        pageno: 1,
        plugins: {
            domevent: !0
        },
        _getNextPage: function(a) {
            var b = this,
            c = b.pageno,
            d =AllUrl.getUserAcc + "page=" + c;
            $.ajax({
                url: d,
                dataType: "jsonp",
                data:{
                    ymonth:u
                },
                success: function(b) {
                    var c = b.data;
                    var code = b.code;   
                    if(code!="0000"){
                        popWin("获取数据失败，请重新刷新");
                    }else{
                        if(c==null||c==undefined){
                            popWin("暂无数据");
                        }else{ 
                            var d = c.detail_list; 
                            var e = d.length;            
                            for (var g = 0; e > g; g++) {
                                var h = d[g].createTime.substring(4,6);
                                var j = d[g].createTime.substring(6,8);
                                var z = d[g].createTime.substring(8,10);
                                var x = d[g].createTime.substring(10,12);
                                var v = d[g].createTime.substring(12,14);
                                var time = h+"-"+j+" "+z+":"+x+":"+v;
                                var ant = d[g].amount;
                                var type = d[g].type;
                                var state = d[g].state;
                                c.detail_list[g].expendata=time;                         
                                if(type=="1"){
                                    c.detail_list[g].monery="+"+ant; 
                                    c.detail_list[g].classs="red";  
                                }else{
                                    c.detail_list[g].monery="-"+ant;
                                    c.detail_list[g].classs="green";  
                                }
                                if(state=="SUCCESS"&&type=="1"){
                                    c.detail_list[g].expenstate="充值成功";
                                }else if(state=="FAILED"&&type=="1"){                                                              
                                    c.detail_list[g].expenstate="充值失败";
                                    c.detail_list[g].class="red";                                 
                                }else if(state=="PROCESSING"&&type=="1"){
                                    c.detail_list[g].expenstate="处理中  ";
                                }else if(state=="SUCCESS"&&type=="2"){
                                    c.detail_list[g].expenstate="提现成功";
                                }else if(state=="FAILED"&&type=="2"){ 
                                    c.detail_list[g].expenstate="提现失败";
                                    c.detail_list[g].class="red"; 
                                }else if(state=="PROCESSING"&&type=="2"){
                                    c.detail_list[g].expenstate="处理中  ";
                                }
                            }                                      
                            a(c)
                        }
                    }    
                }
            })
        },
        _getPageOne: function(a) {
            var m = getmonth(); 
            var n = m.substring(5,7);
            var s = m.substring(0,4);
            var u = eval(s+n);
            $.ajax({
                url: AllUrl.getUserAcc,
                dataType: "jsonp",
                data:{
                    ymonth:u
                },
                success: function(b) {
                    var c = b.data;
                    var code = b.code;   
                    if(code!="0000"){
                        popWin("获取数据失败，请重新刷新");
                    }else{
                        if(c==null||c==undefined){
                            popWin("暂无数据");
                        }else{ 
                            var d = c.detail_list; 
                            var e = d.length;            
                            for (var g = 0; e > g; g++) {
                                var h = d[g].createTime.substring(4,6);
                                var j = d[g].createTime.substring(6,8);
                                var z = d[g].createTime.substring(8,10);
                                var x = d[g].createTime.substring(10,12);
                                var v = d[g].createTime.substring(12,14);
                                var time = h+"-"+j+" "+z+":"+x+":"+v;
                                var ant = d[g].amount;
                                var type = d[g].type;
                                var state = d[g].state;
                                c.detail_list[g].expendata=time;                         
                                if(type=="1"){
                                    c.detail_list[g].monery="+"+ant; 
                                    c.detail_list[g].classs="red";  
                                }else{
                                    c.detail_list[g].monery="-"+ant;
                                    c.detail_list[g].classs="green";  
                                }
                                if(state=="SUCCESS"&&type=="1"){
                                    c.detail_list[g].expenstate="充值成功";
                                }else if(state=="FAILED"&&type=="1"){                                                              
                                    c.detail_list[g].expenstate="充值失败";
                                    c.detail_list[g].class="red";                                 
                                }else if(state=="PROCESSING"&&type=="1"){
                                    c.detail_list[g].expenstate="处理中  ";
                                }else if(state=="SUCCESS"&&type=="2"){
                                    c.detail_list[g].expenstate="提现成功";
                                }else if(state=="FAILED"&&type=="2"){ 
                                    c.detail_list[g].expenstate="提现失败";
                                    c.detail_list[g].class="red"; 
                                }else if(state=="PROCESSING"&&type=="2"){
                                    c.detail_list[g].expenstate="处理中  ";
                                }
                            }                                      
                            a(c)
                        }
                    }    
                }
            })
        },
        render: function(a) {
            var b = this;
            b._getPageOne(function(c) {
                var d = b.template(c);
                b.$el.html(d),
                a && a()
            })
        },
        renderMore: function(a) {
            var b = this;
            b.pageno++,
            b._getNextPage(function(c) {
                var d = b.template(c);
                console.log(d),
                b.$el.append(d),
                a && a()
            })
        },
        destroy: function() {}
    })
}(window.app),
function(a, b) {
    a.extendView({
        name: "inviteView",
        el: "#inviteDetails-text",
        template: "./templates/inviteView.tpl",
        pageno: 1,
        plugins: {
            domevent: !0
        },
        _getNextPage: function(a) {
            var b = this,
            c = b.pageno,
            d = AllUrl.getUserInv + "page=" + c;
            $.ajax({
                url: d,
                dataType: "jsonp",
                success: function(b) {                                         
                        if(b.code=="0000"){
                        var c = b.data;
                        var d = c.length;                        
                            if(d>0){
                            for (var g = 0; d > g; g++) {
                                var h = c[g].createDate.substring(5,18);
                                var j = c[g].mobile.substring(7.11);
                                var k = c[g].state;
                                var z = c[g].sinaPayState;
                                b.data[g].time=h;  
                                b.data[g].tel=j;
                                if(c[g].user_flag==1){
                                    b.data[g].state="已投资";
                                    b.data[g].monery="20元";
                                }else{
                                     b.data[g].state="已注册";
                                     b.data[g].monery="8元";
                                }
                            }                                      
                            a(b);                        
                        }else{
                            popWin("暂无数据");
                        }  
                    }else{
                        popWin("暂无数据");
                    }
                }
            })
        },
        _getPageOne: function(a) {
            var m = getmonth(); 
            var n = m.substring(5,7);
            var s = m.substring(0,4);
            var u = eval(s+n);
                $.ajax({
                    url: AllUrl.getUserInv,
                    dataType: "jsonp",
                    success: function(b) {                                         
                        if(b.code=="0000"){
                        var c = b.data;
                        var d = c.length;                        
                            if(d>0){
                                for (var g = 0; d > g; g++) {
                                var h = c[g].createDate.substring(5,18);
                                var j = c[g].mobile.substring(7.11);
                                var k = c[g].state;
                                var z = c[g].sinaPayState;
                                b.data[g].time=h;  
                                b.data[g].tel=j;
                                if(c[g].user_flag==1){
                                    b.data[g].state="已投资";
                                    b.data[g].monery="20元";
                                }else{
                                     b.data[g].state="已注册";
                                     b.data[g].monery="8元";
                                }
                            }                                      
                            a(b)                        
                        }else{
                            popWin("暂无数据");
                        } 
                    }else{
                        popWin("暂无数据");
                    } 
                }
            })
        },
        render: function(a) {
            var b = this;
            b._getPageOne(function(c) {
                var d = b.template(c);
                b.$el.html(d),
                a && a()
            })
        },
        renderMore: function(a) {
            var b = this;
            b.pageno++,
            b._getNextPage(function(c) {
                var d = b.template(c);
                console.log(d),
                b.$el.append(d),
                a && a()
            })
        },
        destroy: function() {}
    })
}(window.app),
function(a, b) {
    a.extendView({
        name: "invalidBonusView",
        el: "article.invalid",
        template: "./templates/invalidBonus.tpl",
        pageno: 1,
        plugins: {
            domevent: !0
        },
        _getNextPage: function(a) {
            var buyFee= window.app.navigation.getParameter("buyFee")!=undefined?"&buyFee="+window.app.navigation.getParameter("buyFee"):"";
            var period=window.app.navigation.getParameter("period")!=undefined?"&period="+window.app.navigation.getParameter("period"):"";
            var b = this,
            c = b.pageno,
            d = AllUrl.bonusUrl + "status=3"+"&queryType=1&page="+c+buyFee+period;
            $.ajax({
                url: d,
                dataType: "jsonp",
                success: function(b) {
                    console.log(b);
                    var c = b.data;
                    var l = b.data.acctCouponList.length;
                    var t = getToday();
                    var onewL=new Array();
                    onewL=[];
                    for(var i=0;i<l;i++){
                        var g = b.data.acctCouponList[i].expDate.substring(0,10);
                        var f = b.data.acctCouponList[i].couponName.substring(0,4);
                        var u = b.data.acctCouponList[i].useRule;
                        var s = b.data.acctCouponList[i].status;
                        var nub = getTimeFun(t,g)
                        if(s==3 || s==2){
                            if(s==3){
                                b.data.acctCouponList[i].shtype="已使用"//重新定义shtype
                            }else{
                                b.data.acctCouponList[i].shtype="已占用"//重新定义shtype
                            }
                            eval("var x="+u);
                            console.log(x.investAmount);
                            b.data.acctCouponList[i].expDate=g;
                            b.data.acctCouponList[i].couponName=f;
                            b.data.acctCouponList[i].shcash=x.investAmount;//重新定义shcash
                            b.data.acctCouponList[i].shday=x.investTerm;//重新定义shday   
                            onewL.push(b.data.acctCouponList[i]);
                        }else if(nub<0){
                            b.data.acctCouponList[i].shtype="已过期"//重新定义shtype
                            eval("var x="+u);
                            b.data.acctCouponList[i].expDate=g;
                            b.data.acctCouponList[i].couponName=f;
                            b.data.acctCouponList[i].shcash=x.investAmount;//重新定义shcash
                            b.data.acctCouponList[i].shday=x.investTerm;//重新定义shday 
                            onewL.push(b.data.acctCouponList[i]); 
                        }else{
                                          
                        }                        
                    }
                    b.data.acctCouponList=onewL; 
                    a(c)
                }
            })
        },
        _getPageOne: function(a) {
            var buyFee= window.app.navigation.getParameter("buyFee")!=undefined?"&buyFee="+window.app.navigation.getParameter("buyFee"):"";
            var period=window.app.navigation.getParameter("period")!=undefined?"&period="+window.app.navigation.getParameter("period"):"";
            var b = AllUrl.bonusUrl + "status=3"+"&queryType=1&page=1"+buyFee+period;
            $.ajax({
                url: b,
                dataType: "jsonp",
                success: function(b) {
                    var c = b.data;
                    var t = getToday();
                    var onewL=new Array();
                    onewL=[];
                    if(b.code=="0000"){ 
                        var l = b.data.acctCouponList.length;
                        for(var i=0;i<l;i++){
                            var g = b.data.acctCouponList[i].expDate.substring(0,10);
                            var f = b.data.acctCouponList[i].couponName.substring(0,4);
                            var u = b.data.acctCouponList[i].useRule;
                            var s = b.data.acctCouponList[i].status;
                            var nub = getTimeFun(t,g)
                            if(s==3 || s==2){
                                if(s==3){
                                    b.data.acctCouponList[i].shtype="已使用"//重新定义shtype
                                }else{
                                    b.data.acctCouponList[i].shtype="已占用"//重新定义shtype
                                }
                                eval("var x="+u);
                                console.log(x.investAmount);
                                b.data.acctCouponList[i].expDate=g;
                                b.data.acctCouponList[i].couponName=f;
                                b.data.acctCouponList[i].shcash=x.investAmount;//重新定义shcash
                                b.data.acctCouponList[i].shday=x.investTerm;//重新定义shday   
                                onewL.push(b.data.acctCouponList[i]);
                            }else if(nub<0){
                                b.data.acctCouponList[i].shtype="已过期"//重新定义shtype
                                eval("var x="+u);
                                b.data.acctCouponList[i].expDate=g;
                                b.data.acctCouponList[i].couponName=f;
                                b.data.acctCouponList[i].shcash=x.investAmount;//重新定义shcash
                                b.data.acctCouponList[i].shday=x.investTerm;//重新定义shday 
                                onewL.push(b.data.acctCouponList[i]); 
                            }else{
                                              
                            }                        
                        }
                        b.data.acctCouponList=onewL; 
                        a(c);
                        console.log("aa="+c)
                    }else{
                        console.log(b)
                        b.acctCouponList=onewL;
                        a(b);
                    }
                    
                }
            })
        },
        render: function(a) {
            var b = this;
            b._getPageOne(function(c) {
                var d = b.template(c);
                0 < c.acctCouponList.length ? b.$el.html(d) : b.$el.html("<div class='noData'>暂无已用/过期红包</div>"),
                a && a()
            })
        },
        renderMore: function(a) {
            var b = this;
            b.pageno++,
            b._getNextPage(function(c) {
                var d = b.template(c);
                0 < c.acctCouponList.length ? b.$el.html(d) : b.$el.html("<div class='noData'>暂无已用/过期红包</div>"),
                a && a()
            })
        },
        destroy: function() {
            this._el && this._el.off("click", "a", this._itemClickHandler)
        }
    })
} (window.app),
function(a, b) {
    a.extendView({
        name: "supermarketView",
        el: "div.rec-content",
        template: "./templates/supermarketItem.tpl",
        pageno: 1,
        events: [["click", "ul", "_itemClickHandler"]],
        plugins: {
            domevent: !0
        },
        _itemClickHandler: function(b) {
            b.preventDefault();
            var c = $(b.currentTarget).attr("data-proId");
			var flag = $(b.currentTarget).attr("data-flag");
            if (flag==='1') {
                $.ajax({
                    url: AllUrl.getOrds,
                    dataType: "jsonp",
                    success: function(b) {
                        console.log(b);
                        
                        if (b.data) {
                            d = b.data.ordProdDtoList; 
                            e = JSON.stringify(d);                                           
                            e = e.replace(new RegExp("\"","gm"), "");                                         
                            //if(e.indexOf("productId:"+c) >0 || e.indexOf("productId:2") >0 || e.indexOf("productId:7") >0 || e.indexOf("productId:13") >0 || e.indexOf("productId:17") >0 || e.indexOf("productId:24") >0 || e.indexOf("productId:31") >0) {
                            if(getCookieByNameStr("userFlag")=="1"){
                                popWin("新手标只能购买一次");
                            } else {
                                a.navigation.push("/productDetails", {
                                    type: "GET",
                                    data: {
                                        productId: c
                                    }
                                })
                            }
                        } else {
                            a.navigation.push("/productDetails", {
                                type: "GET",
                                data: {
                                    productId: c
                                }
                            })
                        }
                        
                    }
                })                 
            } else {
                 a.navigation.push("/productDetails", {
                    type: "GET",
                    data: {
                        productId: c
                    }
                })
            }
        },
        _getSearchItems: function(a) {
            var b = this,
            c = b.pageno,
            d = AllUrl.getProds +"&delFlag=1" + "&page=" + c;
            $.ajax({ 
                url: d,
                dataType: "jsonp",
                success: function(b) {
                    if (console.log(b.data), 0 == b.data.upProductList.length) {
                       
                    }
                    a(b.data)
                }
            })
        },
        _getPageOne: function(a) {
            var b = AllUrl.getProds +"&delFlag=1"+ "&page=0";
            $.ajax({
                url: b,
                dataType: "jsonp",
                success: function(b) {
                    a(b.data)
                }
            })
        },
        render: function(a) {
            var b = this;
            b._getPageOne(function(c) {
                var d = b.template(c);
                0 == c.upProductList.length ? b.$el.html("<div class='noData'>暂无理财产品</div>") : b.$el.html(d),
                b.$el.html(d),
                a && a()
            })
        },
        renderMore: function(a) {
            var b = this;
            b.pageno++,
            b._getSearchItems(function(c) {
                var d = b.template(c);
                console.log(d),
                b.$el.append(d),
                a && a()
            })
        },
        destroy: function() {}
    })
} (window.app),
function(a, b) {
    a.extendView({
        name: "totalEarnView",
        el: "div.totalEarn",
        template: '{{#ordEarnslist}}<span class="earnRecord" data-total="{{ordTotalEarns}}元/{{dayCount}}天">{{productName}}</span>{{/ordEarnslist}}',
        pageno: 1,
        plugins: {
            domevent: !0
        },
        _getNextPage: function(a) {
            var b = this,
            c = b.pageno,
            d = AllUrl.totalEarns + "page=" + c;
            $.ajax({
                url: d,
                dataType: "jsonp",
                success: function(b) {
                    var c = b.data,
                    d = c.ordEarnslist || [],
                    e = d.length || 0;
                    if (0 == e) {
                        
                    }
                    a(c)
                }
            })
        },
        _getPageOne: function(a) {
            var b = AllUrl.totalEarns + "page=1";
            $.ajax({
                url: b,
                dataType: "jsonp",
                success: function(b) {
                    console.log(b);
                    var c = b.data;
                    a(c)
                }
            })
        },
        render: function(a) {
            var b = this;
            b._getPageOne(function(c) {
                var d = b.template(c);
                b.$el.html(d),
                a && a()
            })
        },
        renderMore: function(a) {
            var b = this;
            b.pageno++,
            b._getNextPage(function(c) {
                var d = b.template(c);
                console.log(d),
                b.$el.append(d),
                a && a()
            })
        },
        destroy: function() {}
    })
} (window.app),
function(a, b) {
    a.extendView({
        name: "transactionView",
        el: "div#transactionList",
        template: "./templates/transactionView.tpl",
        pageno: 1,
        plugins: {
            domevent: !0
        },
        _getNextPage: function(a) {
            var b = this,
            c = b.pageno,
            d = AllUrl.getOrds + "&orderId=189990012872&page=" + c;
            $.ajax({
                url: d,
                dataType: "jsonp",
                success: function(b) {
                    var c = b.data,
                    d = c.ordProdDtoList,
                    e = d.length;
                    if (0 == e) {
                        
                    }
                    for (var g = 0; e > g; g++) {
                        var n = d[g].productName;
                        var h = d[g].status;
                        var st=d[g].effectiveDate.substring(0,10);
                        var ed=d[g].expireDate.substring(0,10);
                        var nub=getTimeFun(st,ed);
                        "undefined" !== status[h] && (c.ordProdDtoList[g].status = PayStatus[h]) 
                        if(h==0||h==1||h==4){
                            c.ordProdDtoList[g].effectiveDate="--";
                            c.ordProdDtoList[g].expireDate="--";                            
                        }else{
                        c.ordProdDtoList[g].effectiveDate=st;
                        c.ordProdDtoList[g].expireDate=ed; 
                        }
                        if( - 1 == n.indexOf("柚金新人礼")){
                            c.ordProdDtoList[g].daynub=nub; 
                        }else{
                            c.ordProdDtoList[g].daynub="新"; 
                        }                                                                                            
                    }
                    a(c)
                }
            })
        },
        _getPageOne: function(a) {
            var b = AllUrl.getOrds + "&page=0";
            $.ajax({
                url: b,
                dataType: "jsonp",
                success: function(b) {
                    console.log(b);
                    var c = b.data,
                    d = c.ordProdDtoList,
                    e = d.length;
                    if (0 == e) {
                        var f = {
                            body: "<p>暂无订单。</p>",
                            buttons: {
                                action: {
                                    title: "关闭",
                                    fn: basicModal.close
                                }
                            }
                        };
                        basicModal.show(f)
                    }
                    for (var g = 0; e > g; g++) {
                        var n = d[g].productName;
                        var h = d[g].status;
                        var st=d[g].effectiveDate.substring(0,10);
                        var ed=d[g].expireDate.substring(0,10);
                        var nub=getTimeFun(st,ed);                        
                        "undefined" !== PayStatus[h] && (c.ordProdDtoList[g].status = PayStatus[h])
                        if(h==0||h==1||h==4){
                            c.ordProdDtoList[g].effectiveDate="--";
                            c.ordProdDtoList[g].expireDate="--";                            
                        }else{
                        c.ordProdDtoList[g].effectiveDate=st;
                        c.ordProdDtoList[g].expireDate=ed; 
                        }
                        if( - 1 == n.indexOf("柚金新人礼")){
                            c.ordProdDtoList[g].daynub=nub; 
                        }else{
                            c.ordProdDtoList[g].daynub="新"; 
                        }                                                 
                    }
                    a(c)
                }
            })
        },
        render: function(a) {
            var b = this;
            b._getPageOne(function(c) {
                var d = b.template(c);
                b.$el.html(d),
                a && a()
            })
        },
        renderMore: function(a) {
            var b = this;
            b.pageno++,
            b._getNextPage(function(c) {
                var d = b.template(c);
                console.log(d),
                b.$el.append(d),
                a && a()
            })
        },
        destroy: function() {}
    })
} (window.app),
function(a, b) {
    a.extendView({
        name: "validBonusView",
        el: "article.valid",
        template: "./templates/validBonus.tpl",
        pageno: 1,
        plugins: {
            domevent: !0
        },
        _getNextPage: function(a) {
            var buyFee= window.app.navigation.getParameter("buyFee")!=undefined?"&buyFee="+window.app.navigation.getParameter("buyFee"):"";
            var period=window.app.navigation.getParameter("period")!=undefined?"&period="+window.app.navigation.getParameter("period"):"";
            var b = this,
            c = b.pageno,
            d = AllUrl.bonusUrl + "status=1"+"&queryType=1&page=" + c+buyFee+period;
            $.ajax({
                url: d,
                dataType: "jsonp",
                success: function(b) {
                    console.log(b);
                    var c = b.data;
                    var onewL=new Array();
                    onewL=[];
                    var onewLL=new Array();
                    onewLL=[];
                    if(b.code=="0000"){
                        var l = b.data.acctCouponList.length;
                        if(l>0){
                            for(var i=0;i<l;i++){
                                var g = b.data.acctCouponList[i].expDate.substring(0,10);
                                var f = b.data.acctCouponList[i].couponName.substring(0,4);
                                var u = b.data.acctCouponList[i].useRule;
                                var s = b.data.acctCouponList[i].status;
                                var hf= b.data.acctCouponList[i].h5Status!=undefined?b.data.acctCouponList[i].h5Status:"";
                                if(s==1){
                                    if(hf=="1"){
                                        eval("var x="+u);
                                        b.data.acctCouponList[i].expDate=g;
                                        b.data.acctCouponList[i].couponName=f;
                                        b.data.acctCouponList[i].shcash=x.investAmount;//重新定义shcash
                                        b.data.acctCouponList[i].shday=x.investTerm;//重新定义shday   
                                        console.log(b.data.acctCouponList[i]);
                                        onewL.push(b.data.acctCouponList[i]);
                                    }else if(hf=="2"){
                                        eval("var x="+u);
                                        b.data.acctCouponList[i].expDate=g;
                                        b.data.acctCouponList[i].couponName=f;
                                        b.data.acctCouponList[i].shcash=x.investAmount;//重新定义shcash
                                        b.data.acctCouponList[i].shday=x.investTerm;//重新定义shday   
                                        onewLL.push(b.data.acctCouponList[i]);
                                    }else{
                                        eval("var x="+u);
                                        b.data.acctCouponList[i].expDate=g;
                                        b.data.acctCouponList[i].couponName=f;
                                        b.data.acctCouponList[i].shcash=x.investAmount;//重新定义shcash
                                        b.data.acctCouponList[i].shday=x.investTerm;//重新定义shday   
                                        console.log(b.data.acctCouponList[i]);
                                        onewL.push(b.data.acctCouponList[i]);
                                    }
                                }
                                                       
                            }
                        }
                        b.data.acctCouponList=onewL;
                        b.data.unacctCouponList=onewLL;
                        a(c)
                    }else{
                        b.acctCouponList=onewL;
                        b.unacctCouponList=onewLL;
                        a(b)
                    }
                }
            })
        },
        _getPageOne: function(a) {
            var buyFee= window.app.navigation.getParameter("buyFee")!=undefined?"&buyFee="+window.app.navigation.getParameter("buyFee"):"";
            var period=window.app.navigation.getParameter("period")!=undefined?"&period="+window.app.navigation.getParameter("period"):"";
            var b = AllUrl.bonusUrl + "status=1"+"&queryType=1&page=1"+buyFee+period;
            console.log(b)
            $.ajax({
                url: b,
                dataType: "jsonp",
                success: function(b) {
                    console.log(b);
                    var c = b.data;
                    
                    var onewL=new Array();
                    onewL=[];
                    var onewLL=new Array();
                    onewLL=[];
                    if(b.code=="0000"){
                        var l = b.data.acctCouponList.length;
                        if(l>0){
                            for(var i=0;i<l;i++){
                                var g = b.data.acctCouponList[i].expDate.substring(0,10);
                                var f = b.data.acctCouponList[i].couponName.substring(0,4);
                                var u = b.data.acctCouponList[i].useRule;
                                var s = b.data.acctCouponList[i].status;
                                var hf= b.data.acctCouponList[i].h5Status!=undefined?b.data.acctCouponList[i].h5Status:"";
                                if(s==1){
                                    if(hf=="1"){
                                        eval("var x="+u);
                                        b.data.acctCouponList[i].expDate=g;
                                        b.data.acctCouponList[i].couponName=f;
                                        b.data.acctCouponList[i].shcash=x.investAmount;//重新定义shcash
                                        b.data.acctCouponList[i].shday=x.investTerm;//重新定义shday   
                                        console.log(b.data.acctCouponList[i]);
                                        onewL.push(b.data.acctCouponList[i]);
                                    }else if(hf=="2"){
                                        eval("var x="+u);
                                        b.data.acctCouponList[i].expDate=g;
                                        b.data.acctCouponList[i].couponName=f;
                                        b.data.acctCouponList[i].shcash=x.investAmount;//重新定义shcash
                                        b.data.acctCouponList[i].shday=x.investTerm;//重新定义shday   
                                        onewLL.push(b.data.acctCouponList[i]);
                                    }else{
                                        eval("var x="+u);
                                        b.data.acctCouponList[i].expDate=g;
                                        b.data.acctCouponList[i].couponName=f;
                                        b.data.acctCouponList[i].shcash=x.investAmount;//重新定义shcash
                                        b.data.acctCouponList[i].shday=x.investTerm;//重新定义shday   
                                        console.log(b.data.acctCouponList[i]);
                                        onewL.push(b.data.acctCouponList[i]);
                                    }
                                }
                                                       
                            }
                        }
                        b.data.acctCouponList=onewL;
                        b.data.unacctCouponList=onewLL;
                        a(c)
                    }else{
                        b.acctCouponList=onewL;
                        b.unacctCouponList=onewLL;
                        a(b);
                    }
                }
            })
        },
        render: function(a) {
            var b = this;
            b._getPageOne(function(c) {
                var d = b.template(c);
                console.log(c.unacctCouponList.length)
                console.log(c.acctCouponList.length)
                0 < c.acctCouponList.length || 0 < c.unacctCouponList.length ? b.$el.html(d) : b.$el.html("<div class='noData'>暂无可用红包</div>"),
                a && a()
            })
        },
        renderMore: function(a) {
            var b = this;
            b.pageno++,
            b._getNextPage(function(c) {
                var d = b.template(c);
                console.log(c.unacctCouponList.length)
                console.log(c.acctCouponList.length)
                0 < c.acctCouponList.length || 0< c.unacctCouponList.length? b.$el.html(d) : b.$el.html("<div class='noData'>暂无可用红包</div>"),
                a && a()
            })
        },
        destroy: function() {}
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "addDebitCard",
        title: "添加银行卡",
        route: "/addDebitCard",
        template: "./templates/addDebitCard.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {}
        },
        startup: function() {
            var a = this,
            b = a.template();
            a.html(b),
            $(document).on("touchend", "#addDebitCard .btn", 
            function() {
                var a = $("#addDebitCard #cardNum").val();
                $.ajax({
                    url: AllUrl.bindCard,
                    dataType: "jsonp",
                    data: {
                        card_no: a,
                        card_type: window.app.navigation.getParameter("card_type")
                    },
                    success: function(a) {
                        if (0 == a.code) {
                            var b = {
                                body: "<p>绑定成功</p>",
                                buttons: {
                                    action: {
                                        title: "关闭",
                                        fn: function() {
                                            $("#addDebitCard #cardNum").val(""),
                                            basicModal.close()
                                        }
                                    }
                                }
                            };
                            basicModal.show(b)
                        } else {
                            var b = {
                                body: "<p>绑定失败：" + a.message + "</p>",
                                buttons: {
                                    action: {
                                        title: "关闭",
                                        fn: function() {
                                            $("#addDebitCard #cardNum").val(""),
                                            basicModal.close()
                                        }
                                    }
                                }
                            };
                            basicModal.show(b)
                        }
                    },
                    error: function(a) {
                        console.log(a)
                    }
                })
            })
        },
        show: function() {},
        hide: function() {},
        teardown: function() {
            $(document).off()
        }
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "assetDetails",
        title: "投资记录",
        route: "/assetDetails",
        template: "./templates/assetDetails.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        toolbar: {
            html: '<nav class="footnav" id="foot-nav"><a class="reco-cur" href="/index.html?" dataid="reco">首页</a> <a class="supe" href="/index.html?#/supe" dataid="supe">理财推荐</a> <a class="asse" href="" dataid="asse">我的账户</a> <a class="more" href="/index.html?#/more" dataid="more">更多</a> </nav>',
            height: 50
        },
        plugins: {
            domevent: !0,
            pullbounce: {}
        },
        _getDta: function(a) {
            $.ajax({
                url: "/data/assetDetails.json",
                dataType: "json",
                success: function(b) {
                    a(b)
                }
            })
        },
        startup: function() {
            var a = this;
            a._getDta(function(b) {
                var c = a.template(b);
                a.html(c)
            }),
            $(document).on("tap", "#assetDetails li", 
            function(a) {
                switch ($("#assetDetails li").removeClass("cur"), this.className = "cur", $(this).attr("data-type")) {
                case "all":
                    $(".all").show(),
                    $(".undue").hide(),
                    $(".repay").hide(),
                    $(".paid").hide();
                    break;
                case "undue":
                    $(".all").hide(),
                    $(".undue").show(),
                    $(".repay").hide(),
                    $(".paid").hide();
                    break;
                case "repay":
                    $(".all").hide(),
                    $(".undue").hide(),
                    $(".repay").show(),
                    $(".paid").hide();
                    break;
                case "paid":
                    $(".all").hide(),
                    $(".undue").hide(),
                    $(".repay").hide(),
                    $(".paid").show();
                    break;
                default:
                    return
                }
            })
        },
        show: function() {},
        hide: function() {},
        teardown: function() {
            $(document).off()
        }
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "assets",
        title: "我的账户",
        route: "/asse",
        template: "./templates/assets.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        events: [["click", "ul", "_itemClickHandler"]],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        toolbar: {
            html: '<nav class="footnav" id="foot-nav"><a class="reco" href="/index.html?" dataid="reco">首页</a> <a class="supe" href="/index.html?#/supe" dataid="supe">理财推荐</a> <a class="asse-cur" href="" dataid="asse">我的账户</a> <a class="more" href="/index.html?#/more" dataid="more">更多</a> </nav>',
            height: 50
        },
        _getDta: function (callback) {
            var url = AllUrl.acctInfo;
            $.ajax({
                url:url,
                dataType:"jsonp",
                success:function(json){
                    sessionStorage.setItem('effOrdTotalEarn', json.data.effOrdTotalEarn);     
                    if(json.data.totalDailyEarn==undefined){
                        json.data.totalDailyEarn="0"; 
                    }
                    if(json.code == "0000"){
                        callback(json.data);
                        $.ajax({
                            url: AllUrl.balanceinfo,
                            dataType: "jsonp",
                            data:{
                                identityType: "UID",
                                accountType: "SAVING_POT"
                            },
                            success: function(a) {                    
                                console.log(a);
                                var b = a.code;
                                if("0000" === b){
                                    c=a.data.balance;									
									sessionStorage.setItem('balance', a.data.balance);                                                   
                                    $("#yuer").append(c);
                                }
                            }             
                        }); 
                        //还款判断              
                        var r = sessionStorage.getItem("repayFlag");
                        if(r=="0"||r=="undefined"){      
                            $(".repay").hide();        
                        }
                        else if(r=="1"){
                            $(".repay").show();
                        }                         
                        //查询新浪支付账户状态
                        $.ajax({
                            url: AllUrl.getSinaPayState,
                            dataType: "jsonp",                  
                            success: function(a) {                    
                                console.log(a);
                                var b = a.code;
                                var c = a.data
                                if ("0000" === b) {
                                    if("SETPWD" === c){
                                        $("#Notfinish").html("已完成"); 
                                        $("#Notfinish").css("color","#999"); 
                                        $("#Noticon").hide();                                     
                                        // $(".validate").attr("disabled",true);                                                                               
                                    }
                                    else {
                                    $(document).on("touchend", ".validate", 
                                            function(a) { 
                                            window.app.navigation.push("/authenName"); 
                                        })
                                    }                                    
                                }                                                                                                                                                               
                            },
                        });                        
                    }else {
                        popWin("请退出重新登录");
                        window.app.navigation.push("/personal");    
                        return;
                    }
                }
            })
                    
        },
        startup: function() {
            var a = this;
            a._getDta(function(b) {
                var c = a.template(b);
                a.html(c)
            }),
            $(document).on("click", ".yesEarn,#myA-income", 
            function(a) {
                var b = $(a.currentTarget)[0].className;
                console.log(b),
                -1 !== b.indexOf("yesEarn") ? window.app.navigation.push("/earnDay") : -1 !== b.indexOf("myA-income") && window.app.navigation.push("/totalEarn")
            }),           
            $(document).on("click", ".account-nav li", 
            function(a) {
                a.preventDefault();
                var b = $(a.currentTarget)[0].className;
                if ( - 1 != b.indexOf("invest")) {
                    var c = {
                        body: "<p>正在建设中...</p>",
                        buttons: {
                            action: {
                                title: "确定",
                                fn: function(a) {
                                    basicModal.close()
                                }
                            }
                        }
                    };
                    basicModal.show(c)                
                }else - 1 != b.indexOf("trade") ? window.app.navigation.push("/transaction") : -1 != b.indexOf("bonus") ? window.app.navigation.push("/bonus"): -1 != b.indexOf("expense") ? window.app.navigation.push("/expenseDetails"): -1 != b.indexOf("personal") ? window.app.navigation.push("/personal"):-1 != b.indexOf("repay") && window.app.navigation.push("/repayment")
            })
            $(document).on("click", ".mark", function() {
                $(".markFrame,.markDown").show();
                $("body").on("click",function(){
                     $(".markFrame,.markDown").hide();
                })
            }) 
            //判断是否绑定银行卡                        
            $(document).on("click", "#myAccount .account-nav .card", 
            function(a) { 
                $.ajax({
                    url: AllUrl.bcardinfo,
					data:{
                                identityType: "UID"                              
                            },
                    dataType: "jsonp",
                    success: function(a) {                    
                        console.log(a);
                        var b = a.code;
						var cc = a.data;
						
                        if("0000" === b && cc){
                            window.app.navigation.push("/managelistCard") 
                        }
                        else{
                            window.app.navigation.push("/manageCard") 
                        }
                    },
                }) 
            }) 
			 app.navigation.setToolbar(this.toolbar);       			
        },
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "baseInfo",
        title: "项目详情",
        route: "/baseInfo",
        template: "./templates/baseInfo.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
            var a = this,
            b = a.template({});
            a.html(b)
        },
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "bonus",
        title: "我的红包",
        route: "/bonus",
        template: "./templates/bonus.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            dynamic: !0,
            lazyload: !0,
            scrollpos: !0,
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(b) {
            this.activeView.pageno = 1,
            this.activeView.render(function() {
                b(),
                setTimeout(function() {
                    a.plugin.lazyload.check()
                },
                500)
            })
        },
        _onPullUpHandler: function(b) {
            this.activeView.renderMore(function() {
                b(),
                setTimeout(function() {
                    a.plugin.lazyload.check()
                },
                500)
            })
        },
        startup: function() {
            function b() {
                //判断链接里是否带有参数 content
                var a = window.app.navigation.getParameter("content");
                "useful" === a && ($(".bonusType").hide(), $(".valid").on("touchend", ".bonus", 
                function(a) {
                    a.preventDefault(),
                    a.stopPropagation();
                    var b = $(a.currentTarget).find(".worth"),
                    c = $(b).attr("data-worth"),
                    d = encodeURIComponent($($(a.currentTarget).find(".bonusTitle")).attr("coupname"));
                    window.app.navigation.push("/purchase", {
                        type: "GET",
                        data: {
                            ct: d,
                            cw: c,
                            cId: $(b).attr("data-cId"),
                            purchaseAmount: window.app.navigation.getParameter("purchaseAmount"),
                            proTitle: window.app.navigation.getParameter("proTitle"),
                            effects: window.app.navigation.getParameter("effects"),
                            expect: window.app.navigation.getParameter("expect"),
                            pid: window.app.navigation.getParameter("pid"),
                            bt: window.app.navigation.getParameter("bt"),
                            tn: window.app.navigation.getParameter("tn"),
                            p: window.app.navigation.getParameter("p"),
                            pcode: window.app.navigation.getParameter("pcode"),
                            name: window.app.navigation.getParameter("name"),
                            uid: window.app.navigation.getParameter("uid")
                        }
                    })
                }))
            }
            var c = this,
            d = this.validBonusView = a.getView("validBonusView");
            this.invalidBonusView = a.getView("invalidBonusView");
            this.validBonusView.render(function() {
                var a = c.template();
                c.html(a),
                $(".bonusList").append(d.el),
                console.log(d.el),
                b()
            }),
            $(document).on("touchend", ".bonusType li", 
            function(a) {
                a.preventDefault(),
                a.stopPropagation(),
                $(".bonusType li").removeClass("cur"),
                this.className = "cur",
                "valid" == $(this).attr("data-flag") ? (c.activeView = c.validBonusView,$(".valid").show(), $(".invalid").hide()) : (c.activeView = c.invalidBonusView,c.invalidBonusView.render(function() {
                    $(".bonusList").append(c.invalidBonusView.el),
                    $(".valid").hide(),
                    $(".invalid").show()
                }))
            })
        },
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "defaultPage",
        title: "柚理财",
        template: "./templates/defaultPage.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        toolbar: {
            html: '<nav class="footnav" id="foot-nav"><a class="reco-cur" href="/index.html?" dataid="reco">首页</a> <a class="supe" href="/index.html?#/supe" dataid="supe">理财推荐</a> <a class="asse" href="/index.html?#/asse" dataid="asse">我的账户</a> <a class="more" href="/index.html?#/more" dataid="more">更多</a> </nav>',
            height: 50
        },
        _getDta: function(a) {
            $.ajax({
                url: AllUrl.getProds+"&delFlag=1",
                dataType: "jsonp",
                success: function(b) {
                    var shm=b.data.upProductList;
                    var rcflag = getCookieByNameStr("userFlag");
                        if(shm.length>0){
                        for(var i=0;i<shm.length;i++){
                            if(rcflag == "1"){
                            //表示老用户，展示推荐标
                                if(shm[i].recommendFlag==1){
                                    a(shm[i]);
                                    break;
                                }else{
                                    if(shm[i].flag!="1"){
                                        a(shm[i]);
                                    }
                                }
                            }else{
                                if(shm[i].flag=="1"){
                                    a(shm[i])
                                    break;
                                }else{
                                    if(shm[i].recommendFlag!=1){
                                        a(shm[i]);
                                    }

                                }
                            }
                        }
                    }
                }
            })
        },
        startup: function() {
            var a,
		    flag,
            b = this;
            b._getDta(function(c) {
                a = c.productId;
				flag = c.flag;
                var d = b.template(c);
                b.html(d)
            }),
            $(document).on("touchend", "#defaultView .buy", 
            function(b) {
                b.preventDefault();
                 if (flag === '1') {
                    $.ajax({
                        url: AllUrl.getOrds,
                        dataType: "jsonp",
                        success: function(b) {
                            console.log(b);
                            
                            if (b.data) {
                               
                                var e = JSON.stringify(b.data.ordProdDtoList);                                           
                                e = e.replace(new RegExp("\"","gm"), "");                                         
                                //if(e.indexOf("productId:"+a) >0 || e.indexOf("productId:2") >0 || e.indexOf("productId:7") >0 || e.indexOf("productId:13") >0 || e.indexOf("productId:17") >0  || e.indexOf("productId:24") >0 || e.indexOf("productId:31") >0) {
                                if(getCookieByNameStr("userFlag")=="1"){  
                                     window.app.navigation.push("/supe");
                                } else {
                                     window.app.navigation.push("/productDetails?productId=" + a);
                                }
                            } else {
                                 window.app.navigation.push("/productDetails?productId=" + a);
                            }
                            
                        }
                    })                 
                } else {
                      window.app.navigation.push("/productDetails?productId=" + a);
                }
               
            })
        },
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "earnDayPage",
        title: "收益详情",
        route: "/earnDay",
        template: './templates/earnDay.tpl',
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            dynamic: !0,
            lazyload: !0,
            scrollpos: !0,
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(b) {
            this.earnDayView.pageno = 1,
            this.earnDayView.render(function() {
                b(),
                setTimeout(function() {
                    a.plugin.lazyload.check()
                },
                500)
            })
        },
        _onPullUpHandler: function(b) {
            this.earnDayView.renderMore(function() {
                b(),
                setTimeout(function() {
                    a.plugin.lazyload.check()
                },
                500)
            })
        },
        startup: function() {
            var b = this,
            c = this.earnDayView = a.getView("earnDayView");
            this.earnDayView.render(function() {
                var a = b.template({});
                b.html(a);
                var e = sessionStorage.getItem('effOrdTotalEarn');
                $("#earnDay-wrap").append(c.el);
                if(e==null){
                    $("#totalEarn").append("0");
                }else{
                    $("#totalEarn").append(e);
                }
                var m = getmonth(); 
                var n = m.substring(5,7);
                var s = m.substring(0,4);
                $(".Arrowday").append(m);
                    $.ajax({
                        url: AllUrl.earnDay,
                        dataType: "jsonp",
                        success: function(b) {
                            var c = b.data;
                            d = c.dayEarnslist;
                            var y = d[2].earnDay.substring(5,7);
                            var u = d[2].earnDay.substring(0,4);  
                            if(y==n&&u==s){
                                $(".earnRecord").show();
                            }else{
                                $(".earnRecord").hide(); 
                            }
                        } 
                    })  
                var tn = getmonthtop($.trim($(".Arrowday").text())).substring(5,7);
                var tu = getmonthtop($.trim($(".Arrowday").text())).substring(0,4);
                if((tu+tn)>=201512){                                                   
                    $(document).on("touchend", ".Arrowleft", function(){
                        var tm = getmonthtop($.trim($(".Arrowday").text()));
                        var tn = getmonthtop($.trim($(".Arrowday").text())).substring(5,7);
                        var tu = getmonthtop($.trim($(".Arrowday").text())).substring(0,4);
                        $(".Arrowday").text(tm);
                        $.ajax({
                            url: AllUrl.earnDay,
                            dataType: "jsonp",
                            success: function(b) {
                                var c = b.data;
                                d = c.dayEarnslist;
                                var y = d[2].earnDay.substring(5,7); 
                                var u = d[2].earnDay.substring(0,4); 
                                if(y==tn&&u==tu){
                                    $(".earnRecord").show();
                                }else{
                                    $(".earnRecord").hide(); 
                                }
                            } 
                        })                         
                    }) 
                }else{
                    $(".Arrowleft").addClass("hleft").removeClass("Arrowleft");

                }
                var dn = getmonthdowm($.trim($(".Arrowday").text())).substring(5,7); 
                var du = getmonthdowm($.trim($(".Arrowday").text())).substring(0,4);
                if((du+dn)<=(s+n)){
                    $(document).on("touchend", ".Arrowright", function(){ 
                        var dm = getmonthdowm($.trim($(".Arrowday").text()));  
                        var dn = getmonthdowm($.trim($(".Arrowday").text())).substring(5,7); 
                        var du = getmonthdowm($.trim($(".Arrowday").text())).substring(0,4);                                                
                        $(".Arrowday").text(dm);
                            $.ajax({
                            url: AllUrl.earnDay,
                            dataType: "jsonp",
                            success: function(b) {
                                var c = b.data;
                                d = c.dayEarnslist;
                                var y = d[2].earnDay.substring(5,7);
                                var u = d[2].earnDay.substring(0,4);
                                if(y==dn&&u==du){
                                    $(".earnRecord").show();
                                }else{
                                    $(".earnRecord").hide(); 
                                }
                            } 
                        })                      
                    })
                }else{
                    $(".Arrowright").addClass("hright").removeClass("Arrowright");
                }
            })
            $(document).on("touchend", ".mark", function(){
                $(".markFrame,.markDown").show();
                $("body").on("touchend",function(){
                     $(".markFrame,.markDown").hide();
                })
            }) 
        },
        show: function() {},
        hide: function() {},
        teardown: function() {
            // var a = this.earnDayView;
            // a.destroy(),
            // $(document).off()
        }
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "findPass",
        title: "找回密码",
        route: "/findPass",
        template: "./templates/findPass.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
            var a = this.template();
            this.html(a);
            var b,
            c = !1;
           // $("#findPass-wrap .sendIdCode").on("click", 
			$("#findPass-wrap .sendIdCode").on("touchend", 
            function(a) {
                a.preventDefault(),
                b = $("#tel4find").val();
                var d = verifyTel(b);
                d.flag ? $.ajax({
                    url: AllUrl.sendFindCode,
                    dataType: "jsonp",
                    data: {
                        mobile: b
                    },
                    success: function(a) {
                        if (console.log(a), "0000" == a.code) {
                            c = !0;
                            var b = $($("#findPass-wrap .sendIdCode")[0]);
                            b.addClass("dis");
                            var d = 60,
                            e = "",
                            f = setInterval(function() {
                                d > -1 ? (e = "(" + d + "s)后重发", b.text(e), d--) : (c = !1, b.removeClass("dis"), b.text("重发验证码"), clearInterval(f))
                            },
                            1e3)
                        } else popWin(a.message)
                    }
                }) : popWin(d.error)
            }),
            $("#findPass-wrap .setNewPass").on("touchend", 
            function(a) {
                if (c) {
                    var d = $("#findPass-wrap #idCode4find").val();
                    if (!d) return void popWin("请输入验证码");
                    var e = $("#newPass").val(),
                    f = verifyPass(e);
                    if (!f.flag) return void popWin(f.error);
                    var g = $("#passAgain").val();
                    if (e !== g) return void popWin("两次输入的新密码不相同，请重新输入");
                    $.ajax({
                        url: AllUrl.findPass,
                        dataType: "jsonp",
                        data: {
                            mobile: b,
                            newPwd: md5(e),
                            verifyCode: d
                        },
                        success: function(a) {
                            console.log(a);
                            var b = a.data.code;
                            if ("0000" === b) {
								popWin("修改成功");
								window.app.navigation.push("/login");   
							}
                            else {
                                var c = a.data.desc;
                                popWin(c)
                            }
                        },
                        error: function(a) {
                            popWin("系统错误，请稍后重试！")
                        }
                    })
                } else popWin("请重发验证码")
            })
        },
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "help",
        title: "常见问题",
        route: "/help",
        template: "./templates/help.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
            var b = this.template();
            this.html(b),
            console.log(a.scroll)
        },
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "login",
        title: "登录",
        route: "/login",
        template: "./templates/login.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
            var b = this.template();
            this.html(b);
           
            $(".regist").on("click", 
            function(b) {
                b.preventDefault(),
                a.navigation.push("/regist")
            }),
            $("#login-btn").on("click", 
            function(a) {
                var b = $("#user").val();
                verifyTel(b);
                var c = $("#password").val();
                $.ajax({
                    url: AllUrl.loginUrl,
                    dataType: "jsonp",
                    data: {
                        mobile: b,
                        pwd: md5(c)
                    },
                    success: function(a) {
                        console.log(a);
                        var bb = a.data.code;
                        if ("0000" === bb) {
                            window.app.navigation.push("/asse");
                            sessionStorage.setItem("repayFlag", a.data.mortgagorFlag);   							
						    sessionStorage.setItem("mobile", b);
                            //sessionStorage.setItem("pwd", c); 
                           // sessionStorage.setItem("checktype", $("#check-two").prop("checked"));
                            
                            //查询新浪支付账户状态
                                                    
                        }                                             
                        else {
                            
                            d = {
                                body: "<p>账号或密码错误</p>",//<p>" + c + "</p>
                                buttons: {
                                    action: {
                                        title: "确定",
                                        fn: basicModal.close
                                    }
                                }
                            };
                            basicModal.show(d)
                        }
                    },
                    error: function(a) {
                        var b = {
                            body: "<p>系统错误，请稍后重试！</p>",
                            buttons: {
                                action: {
                                    title: "确定",
                                    fn: basicModal.close
                                }
                            }
                        };
                        basicModal.show(b)
                    }
                })
            })
            //设置登陆用户名与密码
      /*      var username = sessionStorage.getItem('mobile');
            if(username!=undefined){
                $("#user").val(username.toString());
            }
            
            var checktype = sessionStorage.getItem('checktype');
            if(checktype!=undefined){
                var str = checktype.toString();
                if(str=="true") {
                    var password = sessionStorage.getItem('pwd');
                    $("#password").val(password);
                    $("#check-two").attr("checked",checktype);                 
                }
                if(str=="false"){
                    $("#password").val("");
                    $("#check-two").removeAttr("checked");
                }
            }*/
         
        },
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "manageCard",
        title: "银行卡管理",
        route: "/manageCard",
        template: "./templates/manageCard.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},       
        startup: function() {
            var b = this.template();
            this.html(b),
            console.log(a.scroll)                      
        },
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
}(window.app),
function(a, b) {
    a.definePage({
        name: "managelistCard",
        title: "银行卡管理",
        route: "/managelistCard",
        template: "./templates/managelistCard.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
            var b = this.template();
            this.html(b),
            console.log(a.scroll) 
            $.ajax({
                url: AllUrl.bcardinfo,
                dataType: "jsonp",
                data:{
                    identityType: "UID"                    
                },
                success: function(a) {
                    console.log(a);
					var b = a.code;
					var json = eval(a.data); 
                    var m =json[0].bank_code;                                   
                    if(m==="BOC"){
                        bank="中国银行";
                        $(".zgyh").css('display','block'); 
                        $("#manageCard-wrap #bindList").css('background','#ff8064');
                    }else if(m==="ABC"){
                        bank="农业银行";
                        $(".nyyh").css('display','block');
                        $("#manageCard-wrap #bindList").css('background','#56da96');
                    }else if(m==="ICBC"){
                        bank="工商银行";
                        $(".gsyh").css('display','block');
                        $("#manageCard-wrap #bindList").css('background','#ff8064');
                    }else if(m==="SPDB"){
                        bank="浦发银行";
                        $(".pfyh").css('display','block');
                        $("#manageCard-wrap #bindList").css('background','#64bcff');
                    }else if(m==="CITIC"){
                        bank="中信银行";
                        $(".zxyh").css('display','block');
                        $("#manageCard-wrap #bindList").css('background','#64bcff');
                    }else if(m==="CMB"){
                        bank="招商银行";
                        $(".zsyh").css('display','block');
                        $("#manageCard-wrap #bindList").css('background','#ff8064');
                    }else if(m==="CMBC"){
                        bank="民生银行";
                        $(".msyh").css('display','block');
                        $("#manageCard-wrap #bindList").css('background','#56da96');
                    }else if(m==="GDB"){
                        bank="广发银行";
                        $(".gfyh").css('display','block');
                        $("#manageCard-wrap #bindList").css('background','#ff8064');
                    }else if(m==="CIB"){
                        bank="兴业银行";
                        $(".xyyh").css('display','block');
                        $("#manageCard-wrap #bindList").css('background','#64bcff');
                    }else if(m==="CEB"){
                        bank="光大银行";
                        $(".gdyh").css('display','block');
                        $("#manageCard-wrap #bindList").css('background','#64bcff');
                    }else if(m==="BOS"){
                        bank="上海银行";
                        $(".shyh").css('display','block');
                        $("#manageCard-wrap #bindList").css('background','#ffc856');
                    }else if(m==="PSBC"){
                        bank="中国邮储银行";
                        $(".yzyh").css('display','block');
                        $("#manageCard-wrap #bindList").css('background','#56da96');
                    }else if(m==="HXB"){
                        bank="华夏银行";
                        $(".hxyh").css('display','block');
                        $("#manageCard-wrap #bindList").css('background','#ff8064');
                    }else if(m==="CCB"){
                        bank="建设银行";
                        $(".jsyh").css('display','block');
                        $("#manageCard-wrap #bindList").css('background','#64bcff');
                    }else if(m==="SZPAB"){
                        bank="平安银行";
                        $(".payh").css('display','block');
                        $("#manageCard-wrap #bindList").css('background','#ffc856');
                    }                                                                                                                                                                                                                                                                                    
                    if("0000" === b){ 
                        // $("#cardicon").append(icon);         
	                    $("#cardName").append(bank);                        
                        $("#cardtype").append("借记卡");
                        $("#cardNum").append(json[0].bank_card_no);
                        $("#cardUser").append("持卡人"+"&nbsp;&nbsp;"+json[0].host_name); 
                    }                    

                }
            })                      
        },               
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
}(window.app),
function(a, b) {
    a.definePage({
        name: "modPass",
        title: "修改登录密码",
        route: "/modPass",
        template: "./templates/modPass.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
            var a = this.template();
            this.html(a);
            var b = !1;
          //  $("#modPass-wrap .sendIdCode").on("click", 
			$("#modPass-wrap .sendIdCode").on("touchend", 
            function(a) {
                a.preventDefault(),
                $.ajax({
                    url: AllUrl.sendModCode,
                    dataType: "jsonp",
                    success: function(a) {
                        if (console.log(a), "0000" == a.code) {
                            b = !0;
                            var c = $($("#modPass-wrap .sendIdCode")[0]);
                            c.addClass("dis");
                            var d = 60,
                            e = "",
                            f = setInterval(function() {
                                d > -1 ? (e = "(" + d + "s)后重发", c.text(e), d--) : (b = !1, c.removeClass("dis"), c.text("重发验证码"), clearInterval(f))
                            },
                            1e3)
                        } else popWin(a.message)
                    }
                })
            }),
            $("#modPass-wrap .setNewPass").on("touchend", 
            function(a) {
                var c = $("#modPass-wrap .oldPass").val();
                if (!c) return void popWin("请输入旧密码");
                var d = $("#modPass-wrap .newPass").val();
                if (!d) return void popWin("请输入新密码");
                var e = verifyPass(d);
                if (!e.flag) return void popWin(e.error);
                var f = $("#modPass-wrap .verifyCode").val();
                return f ? void(b ? $.ajax({
                    url: AllUrl.modPass,
                    dataType: "jsonp",
                    data: {
                        oldPwd: md5(c),
                        newPwd: md5(d),
                        verifyCode: f
                    },
                    success: function(a) {
                        "0000" === a.code ? window.app.navigation.push("/login") : popWin(a.message)
                    },
                    error: function(a) {
                        popWin("系统错误，请稍后重试！")
                    }
                }) : popWin("请重发验证码")) : void popWin("请输入验证码")
            })
        },
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "morePage",
        title: "更多",
        route: "/more",
        template: "./templates/morePage.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        events: [["click", ".more-menu li", "_itemClickHandler"]],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        toolbar: {
            html: '<nav class="footnav" id="foot-nav"><a class="reco" href="/index.html?" dataid="reco">首页</a> <a class="supe" href="/index.html?#/supe" dataid="supe">理财推荐</a> <a class="asse" href="" dataid="asse">我的账户</a> <a class="more-cur" href="/index.html?#/more" dataid="more">更多</a> </nav>',
            height: 50
        },
        startup: function() {
            var a = this.template();
            this.html(a),
            $(document).on("click", ".more-menu li", 
            function(a) {
                a.preventDefault();
                var b = $(a.currentTarget)[0].className;
                if ( - 1 != b.indexOf("people")) {
                    var c = {
                        body: "<p>正在建设中...</p>",
                        buttons: {
                            action: {
                                title: "确定",
                                fn: function(a) {
                                    basicModal.close()
                                }
                            }
                        }
                    };
                    basicModal.show(c)
                } else - 1 != b.indexOf("help") ? window.app.navigation.push("/help"): -1 != b.indexOf("cust") ? window.app.navigation.push("/customer"): -1 != b.indexOf("part") ? window.app.navigation.push("/activity"): -1 != b.indexOf("invest") && window.app.navigation.push("/invite")
            })
			app.navigation.setToolbar(this.toolbar);       
        },           
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "proInfo",
        title: "基本信息",
        route: "/proInfo",
        template: "./templates/proInfo.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        _getDta: function(a) {},
        _getDayObj: function(a) {
            if ("number" == typeof a) {
                var b,
                c,
                d,
                e = new Date,
                f = e.getFullYear(),
                g = e.getMonth(),
                h = e.getDate(),
                i = new Date(e.valueOf() + 24 * a * 60 * 60 * 1000);
                return b = i.getFullYear(),
                c = i.getMonth(),
                d = i.getDate(),
                {
                    beginDay: f + (10 > g + 1 ? "-0" + (g + 1) : "-" + (g + 1)) + (10 >h ? "-0" + h : "-" + h),
                    endDay: b + (10 > c + 1 ? "-0" + (c + 1) : "-" + (c + 1)) + (10 > d  ? "-0" + d  : "-" + d)
                }
            }
        },
        startup: function() {
            var a = this,
            b = {
                proTilte: decodeURIComponent(window.app.navigation.getParameter("proTitle")),
                totalAmount: window.app.navigation.getParameter("totalAmount"),
                effects: window.app.navigation.getParameter("effects"),
                expect: window.app.navigation.getParameter("expect")
            };
            dayObj = a._getDayObj(parseInt(b.expect)),
            b.begainDay = dayObj.beginDay,
            b.endDay = dayObj.endDay;
            var c = a.template(b);
            a.html(c)
        },
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "productDetails",
        title: "产品详情",
        route: "/productDetails",
        template: "./templates/productDetails.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        _getDta: function(a) {
            var b = AllUrl.getProds,
            c = window.app.navigation.getParameter("productId");
            $.ajax({
                url: b + "&productId=" + c,
                dataType: "jsonp",
                success: function(b) {
                    var c = b.data.upProductList[0];                    
                    c["if(canBuy==true)"] = function() {
                        return c.restAmount > 0 ? !0: !1
                    },
                    c["if(canBuy==false)"] = function() {
                        return c.restAmount > 0 ? !1: !0
                    },
                    a(c)
                }
            })
        },        
        startup: function() {
            var a = this,
            b = {};
            a._getDta(function(c) {
                var d = a.template(c);
                a.html(d),
                b.totalAmount = c.totalAmount,
                b.effects = c.rate,
                b.expect = c.prodPeriod,
                b.minBuy = c.minBuyAmount,
                b.proTitle = c.productName,
                b.pid = c.productId,
                b.flag = c.flag,
				b.rest = c.restAmount
            }),
           $(document).on("touchend", ".buyNow", 
            function(a) {
                a.preventDefault();
                $("#purchaseAmount").blur();
                var t = $("#purchaseAmount").val();
                sessionStorage.setItem("Allmount", t);        
                if (b.flag==='1') { 
                    if (isNaN(t)) return void popWin("请输入正确的数字");
                    if (t > 20000) return void popWin("新手标只能购买20000元以下");                                    
                    if (t < b.minBuy) return void popWin(b.minBuy + "元起购");
                    if (t % 10!==0) return void popWin("请购买10的整数倍金额");
                    if (t > b.rest) return void popWin("您的购买金额超出标的剩余金额");                                   
                    //判断是否登录
                    var isLogin = getCookieByName("userId");    
                    if(!isLogin){
                        //没有登录，跳转登录页
                        window.app.navigation.push("/login");
                        return;
                    }                
                    window.app.navigation.push("/purchase", {
                        type: "GET",
                        data: {
                            purchaseAmount: t,
                            pid: b.pid
                        }
                    })                                                                                     
                } else {                                                                    
                    if (isNaN(t)) return void popWin("请输入正确的数字");
                    if (t < b.minBuy) return void popWin(b.minBuy + "元起购");
                    if (t % 10!==0) return void popWin("请购买10的整数倍金额"); 
                    if (t > b.rest) return void popWin("您的购买金额超出标的剩余金额");  
                    //判断是否登录
                    var isLogin = getCookieByName("userId");   
                    if(!isLogin){
                        //没有登录，跳转登录页
                        window.app.navigation.push("/login");
                        return;
                    }
                    window.app.navigation.push("/purchase", {
                        type: "GET",
                        data: {
                            purchaseAmount: t,
                            pid: b.pid
                        }
                    })                    
                   
                }   
            }),
            $(document).on("touchend", ".moreDetails span", 
            function(a) {
                var e = this.className;
                if (e === "buyNow") {
                }else
                "proInfo" === e ? window.app.navigation.push("/baseInfo") : "baseInfo" === e && window.app.navigation.push("/proInfo?totalAmount=" + b.totalAmount + "&effects=" + b.effects + "&expect=" + b.expect + "&proTitle=" + encodeURIComponent(b.proTitle))                
            }),
            $(document).on("touchend", ".gray", 
            function(a) {
                console.log("无效")
            })
        },
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "purchase",
        title: "购买",
        route: "/purchase",
        template: "./templates/purchase.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        _getDta: function(a) {},
        startup: function() {
            var a = {
                purchaseAmount: window.app.navigation.getParameter("purchaseAmount"),
                proTitle: decodeURIComponent(window.app.navigation.getParameter("proTitle")),
                effects: window.app.navigation.getParameter("effects"),
                expect: window.app.navigation.getParameter("expect"),
                pid: window.app.navigation.getParameter("pid"),
            };
            $.ajax({
                url: AllUrl.getorder,
                dataType: "jsonp",
                data: { 
                    productId: a.pid
                },
                success: function(a) {                    
                    sessionStorage.setItem("time", a.data.product.expParam);
                    if(a.code == "0000"){
                        $("#purchaseName").text(a.data.product.productName);                        
                        $("#purchaseDay").text(a.data.product.expParam + "天");
                        $("#purchaseProfit").attr("data",(parseFloat(a.data.product.rate)+parseFloat(a.data.product.extRate))+ "%");
                        $("#purchasebuy").attr("data",sessionStorage.getItem("Allmount") + "元");
                    }
                }
            });            
            b = 100;
            a.expectIncome = b;
            var c = decodeURIComponent(window.app.navigation.getParameter("bt")),
            d = window.app.navigation.getParameter("tn"),
            e = window.app.navigation.getParameter("p"),
            f = window.app.navigation.getParameter("pcode"),
            g = decodeURIComponent(window.app.navigation.getParameter("ct"));
            a.ct = "undefined" == g ? "＞": g,
            a.cw = undefined !=window.app.navigation.getParameter("cw")?window.app.navigation.getParameter("cw")+"元":"",
            a.cId = window.app.navigation.getParameter("cId");
            var h = getCookieByName("_i_r_");
            if (h) a.uInfoArr = [];
            else {
                var i = decodeURIComponent(window.app.navigation.getParameter("name"));
                i = "undefined" == i ? "": i;
                var j = window.app.navigation.getParameter("uid");
                j = "undefined" == j ? "": j,
                a.uInfoArr = [{
                    name: i,
                    uid: j
                }]
            }
            "undefined" == c ? (a.bt = "", a.payArr = [{}], a.payInfoArr = []) : (a.payArr = [], a.payInfoArr = [{
                tn: d,
                p: e,
                bt: c,
                pcode: f
            }]);           
            $.ajax({
                url: AllUrl.getRevenue,
                dataType: "jsonp",
                data: {
                    buyAmount: a.purchaseAmount,
                    productId: a.pid
                },
                success: function(a) {
                    $("#purchaseAmount").attr("data",a.data.prosRevenue + "元");
                    "0000" == a.code && $("#purchaseAmount").attr("data",a.data.prosRevenue + "元");
                }
            });
            var k = this.template(a);
            this.html(k);            
            var l = {};
            $(".getBonus").click(function(b) {
                b.preventDefault(),
                b.stopPropagation(),
                window.app.navigation.push("/bonus", {
                    type: "GET",
                    data: {
                        content: "useful",
                        purchaseAmount: a.purchaseAmount,
                        buyFee:a.purchaseAmount,
                        period: sessionStorage.getItem("time"),
                        proTitle: encodeURIComponent(a.proTitle),
                        effects: a.effects,
                        expect: a.expect,
                        pid: a.pid,
                        bt: encodeURIComponent($(".blankName").attr("data-bt")),
                        tn: $(".blankName").attr("data-tn"),
                        p: $("#bankLimit").attr("data-p"),
                        pcode: $(".blankName").attr("data-pcode"),
                        name: encodeURIComponent($("#username").val()),
                        uid: $("#uid").val()
                    }
                })
            }),
            $(".getBank,.payInfo li:nth-child(1)").click(function(b) {
                b.preventDefault(),
                b.stopPropagation(),
                window.app.navigation.push("/manageCard", {
                    type: "GET",
                    data: {
                        content: "useful",
                        purchaseAmount: a.purchaseAmount,
                        proTitle: encodeURIComponent(a.proTitle),
                        effects: a.effects,
                        expect: a.expect,
                        pid: a.pid,
                        ct: encodeURIComponent($(".sltBonus").attr("data-ct")),
                        cw: $(".sltBonus").attr("data-cw"),
                        cId: $(".sltBonus").attr("data-cId"),
                        name: encodeURIComponent($("#username").val()),
                        uid: $("#uid").val()
                    }
                })
            }),
            $(document).on("touchend", "#doPurchase", 
            function(b) {
                var h =window.app.navigation.getParameter("pid");
                var i =window.app.navigation.getParameter("purchaseAmount");
                var hid=undefined!=window.app.navigation.getParameter("cId")?"&insCouponId="+window.app.navigation.getParameter("cId"):"";                
                $.ajax({
                    url: AllUrl.balanceinfo,
                    dataType: "jsonp",
                    data:{
                        identityType: "UID",
                        accountType: "SAVING_POT"
                    },
                    success: function(a) {                  
                        console.log(a);
                        var f = a.code;
                        if("0000" === f){
                            m=a.data.balance; 
                            if( eval(i)  > eval(m) ){
                                window.app.navigation.push("/rechargeAfter"); 
                            }
                            else{
                               location.href=AllUrl.pay+"bank=SINAPAY"+"&productId="+h+"&buyFee="+i+hid; //"&bankId="+
                            }                                                              
                        }
                    }             
                })                 
            })
        },
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "regist",
        title: "注册",
        route: "/regist",
        template: "./templates/regist.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
            var a = this.template();
            this.html(a);
            var b,
            c = !1;
            $(document).on("touchend", "#registForm .verifyCode", 
            function(a){                 
                b = $("#telNum").val();
                var g = verifyTel(b);
                if (!g.flag) return void popWin(g.error);
                $.ajax({
                    url: AllUrl.sendRegCode,
                    data: {
                        mobile: b
                    },
                    dataType: "jsonp",
                    success: function(a) {                        
                        if ("0000" == a.code) {
                            c = !0;
                            var b = $($("#regist-wrap .verifyCode")[0]);
                            b.addClass("dis");
                            var d = 60,
                            e = "",
                            f = setInterval(function() {
                                d > -1 ? (e = "(" + d + "s)后重发", b.text(e), d--) : (c = !1, b.removeClass("dis"), b.text("重发验证码"), clearInterval(f))
                            },
                            1e3)
                        }else if("1003" == a.code){
                            popWin("手机号码已注册");    
                        }else{
                            popWin("请稍后再获取验证码");  
                        }
                    }                                                
                })                                                      
            });
            var inv=app.navigation.getParameter("channel")!=""&&app.navigation.getParameter("channel")!=undefined?"?channel="+app.navigation.getParameter("channel"):"";
			$(document).on("click", "#registBtn", 
            function(a) {
                if (c) {						
					b = $("#telNum").val();
					var e = $("#regist-wrap .code").val();
					if (!e) return void popWin("请输入验证码");
					var f = $("#passCode").val();
					var pg = verifyPass(f);
					if (!pg.flag) return void popWin(pg.error);
					var h = $("#passAgain").val();
					if (f !== h) return void popWin("两次输入密码不相同,请重新输入");
					$.ajax({
						url: AllUrl.registUrl+inv,
						dataType: "jsonp",
						data: {
							mobile: b,
							pwd: md5(f),
							verifyCode: e
						},
						success: function(a) {
    							if ("0000" === a.code) {
                                    popWin("注册成功,请继续认证!");
                                    window.app.navigation.push("/registName");
    							//激活新浪支付账户
    							$.ajax({
    								url: AllUrl.SinaPayMember,
    								dataType: "jsonp", 
    								success: function(a) {                    
    									console.log(a);
    									 // popWin(b);
    									if ("0000" === a.code) {
    										 // popWin(a.message)                                            
    									}   
    									else if ("1002" === a.code)
    									{//用户未登录错误
    									   activepm(b, md5(f));
    									}                      
    								}                                                   
    							});                                
    						} else {
    							popWin(a.message);
    						}																																									   
						},
						error: function(a) {
							popWin("系统错误，请稍后重试！");
						}
					})
				} else {
						popWin("请重发验证码");
				}             
            });

        },          
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()                        
        }
    })
} (window.app),
function(a, b) {   
    a.definePage({
        name: "registName",
        title: "实名认证",
        route: "/registName",
        template: "./templates/registName.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},      
        startup: function(a) {
        var b = this.template();
        this.html(b),
       // console.log(a.scroll)
        $(document).on("click", "#skipBtn",
            function(a) { 
                window.app.navigation.push("/login"); 
        })   
        $(document).on("click", "#referBtn",
        function(a) { 
            var vcity={ 11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",
                      21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",
                      33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",
                      42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",
                      51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",
                      63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"
                       };
            var card = $("#card_no").val();
            var n = $("#name").val();
            if ( n === '') return void popWin("用户名不能为空");
            if ( card === '') return void popWin("请输入身份证号，身份证号不能为空");
            if ( isCardNo(card) === false) return void popWin("身份证输入有误");
            if ( checkProvince(card) === false) return void popWin("身份证输入有误");
            if ( checkBirthday(card) === false) return void popWin("身份证输入有误");
            if ( checkParity(card) === false) return void popWin("身份证输入有误"); 
            //检查号码是否符合规范，包括长度，类型
                isCardNo = function(card)
                {
                  //身份证号码为15位或者18位，15位时全为数字，18位前17位为数字，最后一位是校验位，可能为数字或字符X
                  var reg = /(^\d{15}$)|(^\d{17}(\d|X)$)/;
                  if(reg.test(card) === false)
                  {
                    return false;
                  }
                  return true;
                },
                //取身份证前两位,校验省份
                checkProvince = function(card)
                {
                  var province = card.substr(0,2);
                  if(vcity[province] == undefined)
                  {
                    return false;
                  }
                  return true;
                },
            //检查生日是否正确
                checkBirthday = function(card)
                {
                  var len = card.length;
                  //身份证15位时，次序为省（3位）市（3位）年（2位）月（2位）日（2位）校验位（3位），皆为数字
                  if(len == '15')
                  {
                    var re_fifteen = /^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/; 
                    var arr_data = card.match(re_fifteen);
                    var year = arr_data[2];
                    var month = arr_data[3];
                    var day = arr_data[4];
                    var birthday = new Date('19'+year+'/'+month+'/'+day);
                    return verifyBirthday('19'+year,month,day,birthday);
                  }
                  //身份证18位时，次序为省（3位）市（3位）年（4位）月（2位）日（2位）校验位（4位），校验位末尾可能为X
                  if(len == '18')
                  {
                    var re_eighteen = /^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/;
                    var arr_data = card.match(re_eighteen);
                    var year = arr_data[2];
                    var month = arr_data[3];
                    var day = arr_data[4];
                    var birthday = new Date(year+'/'+month+'/'+day);
                    return verifyBirthday(year,month,day,birthday);
                  }
                  return false;
                },
            //校验日期
                verifyBirthday = function(year,month,day,birthday)
                {
                  var now = new Date();
                  var now_year = now.getFullYear();
                  //年月日是否合理
                  if(birthday.getFullYear() == year && (birthday.getMonth() + 1) == month && birthday.getDate() == day)
                  {
                    //判断年份的范围（3岁到100岁之间)
                    var time = now_year - year;
                    if(time >= 3 && time <= 100)
                    {
                      return true;
                    }
                    return false;
                  }
                  return false;
                },
            //校验位的检测
                checkParity = function(card)
                {
                  //15位转18位
                  card = changeFivteenToEighteen(card);
                  var len = card.length;
                  if(len == '18')
                  {
                    var arrInt = new Array(7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2); 
                    var arrCh = new Array('1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2'); 
                    var cardTemp = 0, i, valnum; 
                    for(i = 0; i < 17; i ++) 
                    { 
                      cardTemp += card.substr(i, 1) * arrInt[i]; 
                    } 
                    valnum = arrCh[cardTemp % 11]; 
                    if (valnum == card.substr(17, 1)) 
                    {
                      return true;
                    }
                    return false;
                  }
                  return false;
                },
            //15位转18位身份证号
                changeFivteenToEighteen = function(card)
                {
                  if(card.length == '15')
                  {
                    var arrInt = new Array(7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2); 
                    var arrCh = new Array('1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2'); 
                    var cardTemp = 0, i;   
                    card = card.substr(0, 6) + '19' + card.substr(6, card.length - 6);
                    for(i = 0; i < 17; i ++) 
                    { 
                      cardTemp += card.substr(i, 1) * arrInt[i]; 
                    } 
                    card += arrCh[cardTemp % 11]; 
                    return card;
                  }
                  return card;
                }, 
				
				 //查询新浪支付账户状态
				$.ajax({
					url: AllUrl.getSinaPayState,
					dataType: "jsonp",                  
					success: function(a) {                    
						console.log(a);
						var b = a.code;
						var c = a.data
						if ("0000" === b) {
							if("INACTIVE" === c){//激活
								sinapmenber($("#name").val(), $("#card_no").val());									
							}
							else if ("ACTIVE" === c)
							{//认证
								realnameauth($("#name").val(), $("#card_no").val());
							}
							else if ("ISREAL" === c)
							{//绑定
								bindverify();
							}
							else if ("VERIFY" === c)
							{//设置密码
								 window.app.navigation.push(AllUrl.setSinaPayPwd);
							}
							else {
								window.app.navigation.push("/asse");
							}                                    
						}                                                                                                                                                               
					},
				});
                                                                         
            })
        },               
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "authenName",
        title: "实名认证",
        route: "/authenName",
        template: "./templates/authenName.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {}, 
        startup: function(a) {
        var b = this.template();
        this.html(b),
       // console.log(a.scroll)
        $(document).on("click", "#registBtn",
        function(a) { 
            var vcity={ 11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",
                      21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",
                      33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",
                      42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",
                      51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",
                      63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"
                       };
            var card = $("#card_no").val();
            var n = $("#name").val();
            if ( n === '') return void popWin("用户名不能为空");
            if ( card === '') return void popWin("请输入身份证号，身份证号不能为空");
            if ( isCardNo(card) === false) return void popWin("身份证输入有误");
            if ( checkProvince(card) === false) return void popWin("身份证输入有误");
            if ( checkBirthday(card) === false) return void popWin("身份证输入有误");
            if ( checkParity(card) === false) return void popWin("身份证输入有误"); 
            //检查号码是否符合规范，包括长度，类型
                isCardNo = function(card)
                {
                  //身份证号码为15位或者18位，15位时全为数字，18位前17位为数字，最后一位是校验位，可能为数字或字符X
                  var reg = /(^\d{15}$)|(^\d{17}(\d|X)$)/;
                  if(reg.test(card) === false)
                  {
                    return false;
                  }
                  return true;
                },
                //取身份证前两位,校验省份
                checkProvince = function(card)
                {
                  var province = card.substr(0,2);
                  if(vcity[province] == undefined)
                  {
                    return false;
                  }
                  return true;
                },
            //检查生日是否正确
                checkBirthday = function(card)
                {
                  var len = card.length;
                  //身份证15位时，次序为省（3位）市（3位）年（2位）月（2位）日（2位）校验位（3位），皆为数字
                  if(len == '15')
                  {
                    var re_fifteen = /^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/; 
                    var arr_data = card.match(re_fifteen);
                    var year = arr_data[2];
                    var month = arr_data[3];
                    var day = arr_data[4];
                    var birthday = new Date('19'+year+'/'+month+'/'+day);
                    return verifyBirthday('19'+year,month,day,birthday);
                  }
                  //身份证18位时，次序为省（3位）市（3位）年（4位）月（2位）日（2位）校验位（4位），校验位末尾可能为X
                  if(len == '18')
                  {
                    var re_eighteen = /^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/;
                    var arr_data = card.match(re_eighteen);
                    var year = arr_data[2];
                    var month = arr_data[3];
                    var day = arr_data[4];
                    var birthday = new Date(year+'/'+month+'/'+day);
                    return verifyBirthday(year,month,day,birthday);
                  }
                  return false;
                },
            //校验日期
                verifyBirthday = function(year,month,day,birthday)
                {
                  var now = new Date();
                  var now_year = now.getFullYear();
                  //年月日是否合理
                  if(birthday.getFullYear() == year && (birthday.getMonth() + 1) == month && birthday.getDate() == day)
                  {
                    //判断年份的范围（3岁到100岁之间)
                    var time = now_year - year;
                    if(time >= 3 && time <= 100)
                    {
                      return true;
                    }
                    return false;
                  }
                  return false;
                },
            //校验位的检测
                checkParity = function(card)
                {
                  //15位转18位
                  card = changeFivteenToEighteen(card);
                  var len = card.length;
                  if(len == '18')
                  {
                    var arrInt = new Array(7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2); 
                    var arrCh = new Array('1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2'); 
                    var cardTemp = 0, i, valnum; 
                    for(i = 0; i < 17; i ++) 
                    { 
                      cardTemp += card.substr(i, 1) * arrInt[i]; 
                    } 
                    valnum = arrCh[cardTemp % 11]; 
                    if (valnum == card.substr(17, 1)) 
                    {
                      return true;
                    }
                    return false;
                  }
                  return false;
                },
            //15位转18位身份证号
                changeFivteenToEighteen = function(card)
                {
                  if(card.length == '15')
                  {
                    var arrInt = new Array(7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2); 
                    var arrCh = new Array('1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2'); 
                    var cardTemp = 0, i;   
                    card = card.substr(0, 6) + '19' + card.substr(6, card.length - 6);
                    for(i = 0; i < 17; i ++) 
                    { 
                      cardTemp += card.substr(i, 1) * arrInt[i]; 
                    } 
                    card += arrCh[cardTemp % 11]; 
                    return card;
                  }
                  return card;
                }, 
				 //查询新浪支付账户状态
				$.ajax({
					url: AllUrl.getSinaPayState,
					dataType: "jsonp",                  
					success: function(a) {                    
						console.log(a);
						var b = a.code;
						var c = a.data
						if ("0000" === b) {
							if("INACTIVE" === c){//激活
								sinapmenber($("#name").val(), $("#card_no").val());									
							}
							else if ("ACTIVE" === c)
							{//认证
								realnameauth($("#name").val(), $("#card_no").val());
							}
							else if ("ISREAL" === c)
							{//绑定
								bindverify();
							}
							else if ("VERIFY" === c)
							{//设置密码
								 window.app.navigation.push(AllUrl.setSinaPayPwd);
							}
							else {
								window.app.navigation.push("/asse");
							}                                 
						}                                                                                                                                                               
					},
				});                                                           
            })
        },                         
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "supermarketPage",
        title: "理财推荐",
        route: "/supe",
        template: "./templates/supermarketPage.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            dynamic: !0,
            lazyload: !0,
            scrollpos: !0,
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        toolbar: {
            html: '<nav class="footnav" id="foot-nav"><a class="reco" href="/index.html?" dataid="reco">首页</a><a class="supe-cur" href="/index.html?#/supe" dataid="supe">理财推荐</a><a class="asse" href="" dataid="asse">我的账户</a> <a class="more" href="/index.html?#/more" dataid="more">更多</a> </nav>',
            height: 50
        },
        _onPullDownHandler: function(b) {
            this.itemViews.pageno = 1,
            this.itemViews.render(function() {
                b(),
                setTimeout(function() {
                    a.plugin.lazyload.check()
                },
                500)
            })
        },
        _onPullUpHandler: function(b) {
            this.itemViews.renderMore(function() {
                b(),
                setTimeout(function() {
                    a.plugin.lazyload.check()
                },
                500)
            })
        },
        _getDta: function(a) {
            var b = AllUrl.getProds+"&delFlag=1";
            $.ajax({
                url: b,
                dataType: "jsonp",
                success: function(b) {
                    a(b.data)
                }
            })
        },
        startup: function() {
            var b = this,
            c = this.itemViews = a.getView("supermarketView");
            app.navigation.setToolbar(this.toolbar);  
            this.itemViews.render(function() {
                b._getDta(function(a) {
                    var d = b.template(a);
                    b.html(d),
                    $("#supe-wrap").append(c.el),
                    console.log(c.el)
                })
            })                              
        },
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "totalEarnPage",
        title: "理财推荐",
        route: "/totalEarn",
        template: '<div id="totalEarn-wrap"> <h4>累计收益详情</h4></div>',
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            dynamic: !0,
            lazyload: !0,
            scrollpos: !0,
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(b) {
            this.totalEarnView.pageno = 1,
            this.totalEarnView.render(function() {
                b(),
                setTimeout(function() {
                    a.plugin.lazyload.check()
                },
                500)
            })
        },
        _onPullUpHandler: function(b) {
            this.totalEarnView.renderMore(function() {
                b(),
                setTimeout(function() {
                    a.plugin.lazyload.check()
                },
                500)
            })
        },
        startup: function() {
            var b = this,
            c = this.totalEarnView = a.getView("totalEarnView");
            this.totalEarnView.render(function() {
                var a = b.template({});
                b.html(a),
                $("#totalEarn-wrap").append(c.el),
                console.log(c.el)
            })
        },
        show: function() {},
        hide: function() {},
        teardown: function() {
            // var a = this.totalEarnView;
            // a.destroy(),
            // $(document).off()
        }
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "transaction",
        title: "交易记录",
        route: "/transaction",
        template: "./templates/transaction.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        events: [["click", "ul", "_itemClickHandler"]],
        plugins: {
            dynamic: !0,
            lazyload: !0,
            scrollpos: !0,
            domevent: !0,
            pullbounce: {
                onPullDown: "",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(b) {
            this.transactionView.pageno = 1,
            this.transactionView.render(function() {
                b(),
                setTimeout(function() {
                    a.plugin.lazyload.check()
                },
                500)
            })
        },
        _onPullUpHandler: function(b) {
            this.transactionView.renderMore(function() {
                b(),
                setTimeout(function() {
                    a.plugin.lazyload.check()
                },
                500)
            })
        },
        _getDta: function(a) {
            $.ajax({
                url: "/data/transaction.json",
                dataType: "json",
                success: function(b) {
                    a(b)
                }
            })
        },
        startup: function() {
            var b = this,
            c = this.transactionView = a.getView("transactionView");
            this.transactionView.render(function() {
                b._getDta(function(a) {
                    var d = b.template(a);
                    b.html(d),
                    $("#transaction-wrap").append(c.el),
                    console.log(c.el)
                })
            }),
            $(document).on("click", ".record", 
            function() {                
                if($(this).children("ul").css("display")=="none"){
                $(this).children().children(".js-opt").hide();
                $($(this).children("ul")).show();
                }else{
                $($(this).children("ul")).hide();
                $(this).children().children(".js-opt").show();
                }
            })
        },
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "personal",
        title: "个人中心",
        route: "/personal",
        template: "./templates/personal.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
            var b = this.template();
            this.html(b),
            console.log(a.scroll)
            //激活新浪支付账户
            $.ajax({
                url: AllUrl.getUserInfo,
                dataType: "jsonp", 
                success: function(a) {                    
                    console.log(a);
                    var b = a.code;
                    var c = a.data.cardId;
                    var n = a.data.nick; 
                    if(n.length===2){
                        var g = n.substr(1,1);
                    }
                    else if(n.length===3){
                        var g = n.substr(1,2);
                    }else if(n.length===4){
                        var g = n.substr(2,2);
                    }              
                    var d = c.substr(16,1);
                    var e = c.substr(14,4);                                
                    if(d==="1"){
                        sex="男";
                    }
                    else if(d==="3"){
                        sex="男";
                    }
                    else if(d==="5"){
                        sex="男";
                    }
                    else if(d==="7"){
                        sex="男";
                    }
                    else if(d==="9"){
                        sex="男";
                    }
                    else if(d=="2"){
                        sex="女";
                    }
                    else if(d=="4"){
                        sex="女";
                    }
                    else if(d=="6"){
                        sex="女";
                    }
                    else if(d=="8"){
                        sex="女";
                    }
                    if ("0000" === b) {
                        $("#user").append(a.data.mobile);                        
                        $("#name").append("*"+g);
                        $("#sex").append(sex);
                        $("#identity").append("**************"+e);                                          
                    }                                    
                    else {
                         // popWin(a.message)
                    }                            
                },                                                     
            })
            //修改密码弹出框
            $(document).on("touchend",".modPass",function(e){
                window.app.navigation.push("/modPass");
                // e.preventDefault();
                // e.stopPropagation();
                // var popup = {
                //     body: '<ul class=""><li class="debitCard"><a class="debit" href="/index.html#/modPass">修改登录密码</a></li><li class="creditCard"><a href="javascript:void(0);">修改支付密码</a></li></ul>',
                //     buttons: {
                //         cancel: {
                //             title: '取消',
                //             class: basicModal.THEME.xclose,
                //             fn: basicModal.close
                //         }
                //     }
                // }
                // basicModal.show(popup);
                // $(document).on("touchend",".debit",function(a){
                //         basicModal.close(popup); 
                // })                                
            })
            //退出登录
            $(document).on("touchend",".logout", function(e){
                e.preventDefault();
                e.stopPropagation();
                var el = $(e.currentTarget)[0].className;
                if(el == "logout"){
                    $.ajax({
                        url:AllUrl.logout,
                        dataType:'jsonp',
                        success: function (result) {							
							//setCookie("mobile", "")
                            window.app.navigation.push("/login");
                        }
                    })
                }
            })            
        },              
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "userProtocol",
        title: "用户使用协议",
        route: "/userProtocol",
        template: "./templates/userProtocol.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
            var b = this.template();
            this.html(b),
            console.log(a.scroll)
        },
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
}(window.app),
function(a, b) {
    a.definePage({
        name: "recharge",
        title: "充值",
        route: "/recharge",
        template: "./templates/recharge.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
        var b = this.template();
        this.html(b),
        // console.log(a.scroll)
        $(document).on("click", "#registBtn", 
        function(a) { 
            var n = $("#card_no").val();
            if(n==""){
                popWin("请输入充值金额");
            }
            else if(parseFloat(n) < 100){
                popWin("最低充值100元起");
            }
            else{
                window.app.navigation.push(AllUrl.paydeposit+"?amount="+n)                     
            }           
            })           
        },               
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "rechargeAfter",
        title: "充值",
        route: "/rechargeAfter",
        template: "./templates/rechargeAfter.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
        var b = this.template();
        this.html(b),
        // console.log(a.scroll)
        $(document).on("click", "#registBtn", 
        function(a) { 
            var n = $("#card_no").val();
            if(n==""){
                popWin("请输入充值金额");
            }
            else if(n < 100){
                popWin("最低充值100元起");
            }
            else{
                window.app.navigation.push(AllUrl.paydeposit+"?amount="+n)                     
            }           
            })           
        },                
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
} (window.app),
function(a, b) {
    a.definePage({
        name: "withdraw",
        title: "提现",
        route: "/withdraw",
        template: "./templates/withdraw.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
            var b = this.template();
            this.html(b),
            // console.log(a.scroll)                           
            $(document).on("click", "#registBtn", 
            function(a) { 
                var c =$("#card_no").val(); 
                var m =sessionStorage.getItem('balance');
                if(c == ""){
                    popWin("请输入金额")
                }
                else if(parseFloat(c)>parseFloat(m)){
                    popWin("余额不足")
                }                 
                else{
                    window.app.navigation.push(AllUrl.paywithdraw+"?amount="+c) 
                }                                  
            })         
        },               
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
}(window.app),
function(a, b) {
    a.definePage({
        name: "error2040",
        title: "柚理财",
        route: "/error2040",
        template: "./templates/error2040.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
            var b = this.template();
            this.html(b),
            console.log(a.scroll)
        },               
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
}(window.app),
function(a, b) {
    a.definePage({
        name: "error404",
        title: "柚理财",
        route: "/error404",
        template: "./templates/error404.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
            var b = this.template();
            this.html(b),
            console.log(a.scroll)
        },               
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
}(window.app),
function(a, b) {
    a.definePage({
        name: "error500",
        title: "柚理财",
        route: "/error500",
        template: "./templates/error500.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
            var b = this.template();
            this.html(b),
            console.log(a.scroll)
        },               
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
}(window.app),
function(a, b) {
    a.definePage({
        name: "creProtocol",
        title: "债权转让及回购协议",
        route: "/creProtocol",
        template: "./templates/creProtocol.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
            var b = this.template();
            this.html(b),
            console.log(a.scroll)
        },               
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
}(window.app),
function(a, b) {
    a.definePage({
        name: "customer",
        title: "客服服务",
        route: "/customer",
        template: "./templates/customer.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
            var b = this.template();
            this.html(b),
            console.log(a.scroll)
        },               
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
}(window.app),
function(a, b) {
    a.definePage({
        name: "activity",
        title: "活动中心",
        route: "/activity",
        template: "./templates/activity.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
            var b = this.template();
            this.html(b),
            console.log(a.scroll)          
        },               
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
}(window.app),
function(a, b) {
    a.definePage({
        name: "acdetails",
        title: "活动中心",
        route: "/acdetails",
        template: "./templates/acdetails.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
            var b = this.template();
            this.html(b),
            console.log(a.scroll)          
        },               
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
}(window.app),
function(a, b) {
    a.definePage({
        name: "regisacdetail",
        title: "注册送红包",
        route: "/regisacdetail",
        template: "./templates/regisacdetail.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
            var b = this.template();
            this.html(b),
           $(document).on("click","#regist-btn",function(){
            app.navigation.push("/regist");
           });      
        },               
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
}(window.app),
function(a, b) {
    a.definePage({
        name: "contract",
        title: "账户资金由新浪支付和工商银行托管",
        route: "/contract",
        template: "./templates/contract.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
            var b = this.template();
            this.html(b),
            console.log(a.scroll)          
        },               
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
}(window.app),
function(a, b) {
    a.definePage({
        name: "repayment",
        title: "还款",
        route: "/repayment",
        template: "./templates/repayment.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
            var b = this.template();
            this.html(b),
            console.log(a.scroll)  
            $(document).on("click", "#registBtn", 
                function(a) { 
                var n = $("#card_no").val();
                if(n==""||parseFloat(n)==0){
                    popWin("请输入还款金额");
                }else{
                    window.app.navigation.push(AllUrl.repaymentUrl+"?amount="+n)                     
                }           
            })                    
        },               
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
}(window.app),
function(a, b) {
    a.definePage({
        name: "succdraw",
        title: "提现成功",
        route: "/succdraw",
        template: "./templates/succdraw.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
            var b = this.template();
            this.html(b);
            console.log(a.scroll); 
            $(function(){
                var i=3;
                var countdown = null;
                function timeShow(){
                    i--;
                    $(".countdown").html( i + "秒跳转至我的账户");
                    if(i<1){
                        clearInterval(countdown);
                        window.app.navigation.push("/asse"); 
                    }
                };
                countdown = setInterval(timeShow,1000);
            })          
        },                
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
}(window.app),
function(a, b) {
    a.definePage({
        name: "invite",
        title: "邀请好友",
        route: "/invite",
        template: "./templates/invite.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }], 
        toolbar: {
            html: '<nav class="footnavs"><input type="button" id="code"><input type="button" value="邀请壕友" id="invite-btn"></nav>',
            height: 50
        },        
        events: [["click", "id", "_itemClickHandler"]],                      
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },               
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},        
        startup: function() {
            var b = this.template();
            this.html(b),
            app.navigation.setToolbar(this.toolbar);
            var userId = sessionStorage.getItem('mobile'); 
            if(sessionStorage.getItem('mobile')!=undefined&&sessionStorage.getItem('mobile')!=""){
                var sharelink="http://m.iulicai.com/index.html#/registShare?invite="+sessionStorage.getItem('mobile');
            }else{
                var sharelink="http://m.iulicai.com/index.html#/registShare";
            }
             console.log(sharelink);
            $.ajax({
                url: AllUrl.getUserInfo,
                dataType: "jsonp",
                success: function(c) {
                    var b=c.data;
                    if(c.code=="0000"){
                        $(".register").append(b.inviteTotal);
                        $(".Investment").append(b.invertNum);                        
                        $(".text").show();
                        $(".tixt").hide();                        
                        console.log("b");
                    }else{
                        console.log("a");
                        $(".text").hide(); 
                        $(".tixt").show();                      
                    } 
                },
                error:function(){
                    console.log("c")
                    $(".text").hide(); 
                    $(".tixt").show();                    
                }

            });                                     
            $("#qrcode").qrcode({render: "canvas",width:200,height:200, text:sharelink});
            $(document).on("click", "#code", function(){
                if(sessionStorage.getItem('mobile')==null||sessionStorage.getItem('mobile')==undefined){
                    popWinLogin("参加本次活动请先登录");    
                }else{                
                var docHeight = $(document).height()+66; //获取窗口高度 
                    $("#popshadow").css("height",docHeight).show();  
                    $("#qrcode").show();
                    $("body").on("click",function(){
                    $("#popshadow").hide();
                    $("#qrcode").hide();                
                    });
                } 
            });
            $(document).on("click", "#invite-btn", function(){
                if(sessionStorage.getItem('mobile')==null||sessionStorage.getItem('mobile')==undefined){
                    popWinLogin("参加本次活动请先登录");    
                }else{                
                    var docHeight = $(document).height()+66; //获取窗口高度
                    $("#popshadow").css("height",docHeight).show();
                    $("#shareimg").show();
                    $("body").on("click",function(){
                    $("#popshadow").hide();
                    $("#shareimg").hide();
                    });
                }    
            });
            $(document).on("click", ".test", function(){
                if(sessionStorage.getItem('mobile')==null||sessionStorage.getItem('mobile')==undefined){
                    popWinLogin("参加本次活动请先登录"); 
                }else{
                    window.app.navigation.push("/inviteDetails"); 
                }
            });                         
            $.ajax({
                url :AllUrl.getWxsign,
                type : "get",
                dataType : "jsonp",
                success:function(json){
                    if(json.code="0000"){
                        var temp_tik=json.data;
                        var mydate = new Date();
                        var tim = parseInt(mydate.getTime()/1000);
                        console.log(temp_tik);
                        console.log(tim)
                        var str="jsapi_ticket="+temp_tik+"&noncestr=Wm3WZYTPz0wzccnW&timestamp="+tim+"&url="+location.href.split("#")[0];
                        var sign=hex_sha1(str);
                        console.log(sign);
                        wx.config({
                            debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
                            appId: 'wxadd332844eabd596', // 必填，公众号的唯一标识
                            timestamp:tim, // 必填，生成签名的时间戳
                            nonceStr: 'Wm3WZYTPz0wzccnW', // 必填，生成签名的随机串
                            signature: sign,// 必填，签名，见附录1
                            jsApiList: ["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2
                        });
                    }
                }
            });
            var sharetitle = '小伙伴喊你一起来理财';
            var sharedesc ="最高18+6%年化收益率，注册即送68元，大家都在用的理财方式，不需要解释！";
            var shareimg = "http://m.iulicai.com/release/imgs/shareimg.png";
            wx.ready(function(){
                wx.onMenuShareTimeline({
                    title: sharetitle, // 分享标题
                    link: sharelink, // 分享链接
                    imgUrl: shareimg, // 分享图标
                    success: function () { 
                     // 用户确认分享后执行的回调函数
                    },
                    fail:function(){

                    },
                    cancel: function() { 
                    // 用户取消分享后执行的回调函数
                    }
                
                }); 
                wx.onMenuShareAppMessage({
                    title: sharetitle, // 分享标题
                    desc: sharedesc, // 分享描述
                    link: sharelink, // 分享链接
                    imgUrl: shareimg, // 分享图标
                    type: 'link', // 分享类型,music、video或link，不填默认为link
                    dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
                    success: function () { 
                        // 用户确认分享后执行的回调函数
                    },
                    fail:function(){

                    },
                    cancel: function() { 
                    // 用户取消分享后执行的回调函数
                    }
                });
                wx.onMenuShareQZone({
                    title: sharetitle, // 分享标题
                    desc: sharedesc, // 分享描述
                    link: sharelink, // 分享链接
                    imgUrl: shareimg, // 分享图标
                    success: function () { 
                       // 用户确认分享后执行的回调函数
                    },
                    fail:function(){

                    },
                    cancel: function() { 
                    // 用户取消分享后执行的回调函数
                    }
                });
                wx.onMenuShareQQ({
                    title: sharetitle, // 分享标题
                    desc: sharedesc, // 分享描述
                    link: sharelink, // 分享链接
                    imgUrl: shareimg, // 分享图标
                    success: function () { 
                       // 用户确认分享后执行的回调函数
                       // alert(sharelink)
                    },
                    cancel: function () { 
                       // 用户取消分享后执行的回调函数
                    }
                });
            });
        },              
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
}(window.app),
function(a, b) {
    a.definePage({
        name: "inviteDetails",
        title: "活动页面",
        route: "/inviteDetails",
        template: "./templates/inviteDetails.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],                      
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },               
        _onPullDownHandler: function(b) {
            this.expenseView.pageno = 1,
            this.expenseView.render(function() {
                b(),
                setTimeout(function() {
                    a.plugin.lazyload.check()
                },
                500)
            })
        },
        _onPullUpHandler: function(b) {
            this.expenseView.renderMore(function() {
                b(),
                setTimeout(function() {
                    a.plugin.lazyload.check()
                },
                500)
            })
        },                 
        
        startup: function() {
            var b = this,
            c = this.itemViews = a.getView("inviteView");
            this.itemViews.render(function() {
                var a = b.template({});
                b.html(a); 
                $("#inviteDetails-text").append(c.el)
            })    
        },               
        show: function() {},
        hide: function() {},
        teardown: function() {
        }
    })
}(window.app),
function(a, b) {
    a.definePage({
        name: "registShare",
        title: "新用户注册",
        route: "/registShare",
        template: "./templates/registShare.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},
        startup: function() {
            var a = this.template();
            this.html(a);
            var b,
            c = !1;
            $("#phonefour").text(app.navigation.getParameter("invite")!=""&&app.navigation.getParameter("invite")!=undefined?app.navigation.getParameter("invite").substring(7,11):"");
            $(document).on("touchend", "#registForm .verifyCode", 
            function(a) {
                b = $("#telNum").val();
                var g = verifyTel(b);
                if (!g.flag) return void popWin(g.error);
                $.ajax({
                    url: AllUrl.sendRegCode,
                    data: {
                        mobile: b
                    },
                    dataType: "jsonp",
                    success: function(a) {                        
                        if ("0000" == a.code) {
                            c = !0;
                            var b = $($("#registShare-wrap .verifyCode")[0]);
                            b.addClass("dis");
                            var d = 60,
                            e = "",
                            f = setInterval(function() {
                                d > -1 ? (e = "(" + d + "s)后重发", b.text(e), d--) : (c = !1, b.removeClass("dis"), b.text("重发验证码"), clearInterval(f))
                            },
                            1e3)
                        }else if("1003" == a.code){
                            popWin("手机号码已注册");    
                        }else{
                            popWin("请稍后再获取验证码");  
                        }
                    }                                                
                }) 
            });
            var inv=app.navigation.getParameter("invite")!=""&&app.navigation.getParameter("invite")!=undefined?"?inviterm="+app.navigation.getParameter("invite"):"";
            $(document).on("click", "#registBtn", 
            function(a) {
                if (c) {                        
                    b = $("#telNum").val();
                    var e = $("#registShare-wrap .code").val();
                    if (!e) return void popWin("请输入验证码");
                    var f = $("#passCode").val();
                    var pg = verifyPass(f);
                    if (!pg.flag) return void popWin(pg.error);
                    var h = $("#passAgain").val();
                    if (f !== h) return void popWin("两次输入密码不相同,请重新输入");
                    
                    $.ajax({
                        url: AllUrl.registUrl+inv,
                        dataType: "jsonp",
                        data: {
                            mobile: b,
                            pwd: md5(f),
                            verifyCode: e
                        },
                        success: function(a) {
                            if ("0000" === a.code) {
                                window.app.navigation.push("/succinvite");
                                //激活新浪支付账户
                                $.ajax({
                                    url: AllUrl.SinaPayMember,
                                    dataType: "jsonp", 
                                    success: function(a) {                    
                                        console.log(a);
                                
                                         // popWin(b);
                                        if ("0000" === a.code) {
                                             // popWin(a.message)                                            
                                        }   
                                        else if ("1002" === a.code)
                                        {//用户未登录错误
                                           activepm(b, md5(f));
                                        }                           
                                    }                                                   
                                });                                
                            } else {
                                popWin(a.message);
                            }                                                                                                                                                                           
                        },
                        error: function(a) {
                            popWin("系统错误，请稍后重试！");
                        }
                    })
                } else {
                        popWin("请重发验证码");
                }             
            });
        },          
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()                        
        }
    })
}(window.app),
function(a, b) {
    a.definePage({
        name: "succinvite",
        title: "新用户注册",
        route: "/succinvite",
        template: "./templates/succinvite.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],                      
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },               
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},        
        startup: function() {
            var b = this.template();
            this.html(b),
            console.log(a.scroll)         
        },               
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
}(window.app),
function(a, b) {
    a.definePage({
        name: "expenseDetails",
        title: "收支明细",
        route: "/expenseDetails",
        template: "./templates/expenseDetails.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],                      
        plugins: {
            dynamic: !0,
            lazyload: !0,
            scrollpos: !0,
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },
        _onPullDownHandler: function(b) {
            this.expenseView.pageno = 1,
            this.expenseView.render(function() {
                b(),
                setTimeout(function() {
                    a.plugin.lazyload.check()
                },
                500)
            })
        },
        _onPullUpHandler: function(b) {
            this.expenseView.renderMore(function() {
                b(),
                setTimeout(function() {
                    a.plugin.lazyload.check()
                },
                500)
            })
        },              
        startup: function() { 
            var b = this,
            c = this.expenseView = a.getView("expenseView");
            this.expenseView.render(function() {            
                var a = b.template({});
                b.html(a); 
                $("#expenseDetails-wrap").append(c.el);              
                var m = getmonth(); 
                var n = m.substring(5,7);
                var s = m.substring(0,4);
                var z = eval(s+n);
                $(".Arrowday").append(m);
                    $.ajax({
                        url: AllUrl.getUserAcc,
                        dataType: "jsonp",
                        data: {
                            ymonth:z
                        },
                        success: function(b) {
                            var c = b.data;
                            var d = c.detail_list; 
                            var y = d[0].createTime.substring(5,7);
                            var u = d[0].createTime.substring(0,4);                  
                            if(y==n&&u==s){
                                $(".earnRecord").show();
                            }else{
                                $(".earnRecord").hide(); 
                            }
                        } 
                    })  
                var tn = getmonthtop($.trim($(".Arrowday").text())).substring(5,7);
                var tu = getmonthtop($.trim($(".Arrowday").text())).substring(0,4);
                if((tu+tn)>=201512){                                                   
                    $(document).on("touchend", ".Arrowleft", function(){
                        var tm = getmonthtop($.trim($(".Arrowday").text()));
                        var tn = getmonthtop($.trim($(".Arrowday").text())).substring(5,7);
                        var tu = getmonthtop($.trim($(".Arrowday").text())).substring(0,4);
                        $(".Arrowday").text(tm);
                        $.ajax({
                            url: AllUrl.getUserAcc,
                            dataType: "jsonp",
                            data: {
                                ymonth:tu+tn
                            },                            
                            success: function(b) {
                                var c = b.data;
                                var d = c.detail_list; 
                                var y = d[0].createTime.substring(5,7);
                                var u = d[0].createTime.substring(0,4); 
                                if(y==tn&&u==tu){
                                    $(".earnRecord").show();
                                }else{
                                    $(".earnRecord").hide(); 
                                }
                            } 
                        })                         
                    }) 
                }else{
                    $(".Arrowleft").addClass("hleft").removeClass("Arrowleft");

                }
                var dn = getmonthdowm($.trim($(".Arrowday").text())).substring(5,7); 
                var du = getmonthdowm($.trim($(".Arrowday").text())).substring(0,4);
                if((du+dn)<=(s+n)){
                    $(document).on("touchend", ".Arrowright", function(){ 
                        var dm = getmonthdowm($.trim($(".Arrowday").text()));  
                        var dn = getmonthdowm($.trim($(".Arrowday").text())).substring(5,7); 
                        var du = getmonthdowm($.trim($(".Arrowday").text())).substring(0,4);                                                
                        $(".Arrowday").text(dm);
                            $.ajax({
                            url: AllUrl.getUserAcc,
                            dataType: "jsonp",
                            data: {
                                ymonth:du+dn
                            },                             
                            success: function(b) {
                                var c = b.data;
                                var d = c.detail_list; 
                                var y = d[0].createTime.substring(5,7);
                                var u = d[0].createTime.substring(0,4);
                                if(y==dn&&u==du){
                                    $(".earnRecord").show();
                                }else{
                                    $(".earnRecord").hide(); 
                                }
                            } 
                        })                      
                    })
                }else{
                    $(".Arrowright").addClass("hright").removeClass("Arrowright");
                } 
            })                    
        },               
        show: function() {},
        hide: function() {},
        teardown: function() {
        }
    })
}(window.app),
function(a, b) {
    a.definePage({
        name: "christmas",
        title: "圣诞活动",
        route: "/christmas",
        template: "./templates/christmas.tpl",
        buttons: [{
            type: "back",
            text: "< 返回"
        }],                    
        plugins: {
            domevent: !0,
            pullbounce: {
                onPullDown: "_onPullDownHandler",
                onPullUp: "_onPullUpHandler"
            }
        },           
        enableScroll:true,
        _onPullDownHandler: function(a) {},
        _onPullUpHandler: function(a) {},          
        startup: function() {
            var b = this.template();
            this.html(b);      
            $(function(){ 
                show_time();
            });
            $.ajax({
                url :AllUrl.getWxsign,
                type : "get",
                dataType : "jsonp",
                success:function(json){
                    if(json.code="0000"){
                        var temp_tik=json.data;
                        var mydate = new Date();
                        var tim = parseInt(mydate.getTime()/1000);                                       
                        var str="jsapi_ticket="+temp_tik+"&noncestr=Wm3WZYTPz0wzccnW&timestamp="+tim+"&url="+location.href.split("#")[0];
                        var sign=hex_sha1(str);
                        console.log(sign);
                        wx.config({
                            debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
                            appId: 'wxadd332844eabd596', // 必填，公众号的唯一标识
                            timestamp:tim, // 必填，生成签名的时间戳
                            nonceStr: 'Wm3WZYTPz0wzccnW', // 必填，生成签名的随机串
                            signature: sign,// 必填，签名，见附录1
                            jsApiList: ["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2
                        });
                    }
                }
            });
            var sharetitle = '圣诞节不发礼物都是耍流氓';
            var sharedesc ="Iphone6S、ipad、平衡车⋯⋯18+N%的预期年化收益率，新手注册即送68元，这些还不够，所有你想在圣诞节收到的礼物都在这里了，动动手指在圣诞节嗨起来吧！";
            var shareimg = "http://m.iulicai.com/release/imgs/shengdan3.png";
            var sharelink="http://m.iulicai.com/index.html#/christmas";
            wx.ready(function(){
                wx.onMenuShareTimeline({
                    title: sharetitle, // 分享标题
                    link: sharelink, // 分享链接
                    imgUrl: shareimg, // 分享图标
                    success: function () { 
                     // 用户确认分享后执行的回调函数
                    },
                    fail:function(){

                    },
                    cancel: function() { 
                    // 用户取消分享后执行的回调函数
                    }
                
                }); 
                wx.onMenuShareAppMessage({
                    title: sharetitle, // 分享标题
                    desc: sharedesc, // 分享描述
                    link: sharelink, // 分享链接
                    imgUrl: shareimg, // 分享图标
                    type: 'link', // 分享类型,music、video或link，不填默认为link
                    dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
                    success: function () { 
                        // 用户确认分享后执行的回调函数
                    },
                    fail:function(){

                    },
                    cancel: function() { 
                    // 用户取消分享后执行的回调函数
                    }
                });
                wx.onMenuShareQZone({
                    title: sharetitle, // 分享标题
                    desc: sharedesc, // 分享描述
                    link: sharelink, // 分享链接
                    imgUrl: shareimg, // 分享图标
                    success: function () { 
                       // 用户确认分享后执行的回调函数
                    },
                    fail:function(){

                    },
                    cancel: function() { 
                    // 用户取消分享后执行的回调函数
                    }
                });
                wx.onMenuShareQQ({
                    title: sharetitle, // 分享标题
                    desc: sharedesc, // 分享描述
                    link: sharelink, // 分享链接
                    imgUrl: shareimg, // 分享图标
                    success: function () { 
                       // 用户确认分享后执行的回调函数
                       // alert(sharelink)
                    },
                    cancel: function () { 
                       // 用户取消分享后执行的回调函数
                    }
                });
            });            
        },
        show: function() {},
        hide: function() {},
        teardown: function() {
            // $(document).off()
        }
    })
}(window.app);